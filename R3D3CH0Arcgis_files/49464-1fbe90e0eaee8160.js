"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49464,18999,98382],{315361:function(e,t,i){i.d(t,{h:function(){return s}});let s="M9.5 2h-6A1.502 1.502 0 0 0 2 3.5v6A1.502 1.502 0 0 0 3.5 11h6A1.502 1.502 0 0 0 11 9.5v-6A1.502 1.502 0 0 0 9.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 2h-6A1.502 1.502 0 0 0 13 3.5v6a1.502 1.502 0 0 0 1.5 1.5h6A1.502 1.502 0 0 0 22 9.5v-6A1.502 1.502 0 0 0 20.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM9.5 13h-6A1.502 1.502 0 0 0 2 14.5v6A1.502 1.502 0 0 0 3.5 22h6a1.502 1.502 0 0 0 1.5-1.5v-6A1.502 1.502 0 0 0 9.5 13zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 13h-6a1.502 1.502 0 0 0-1.5 1.5v6a1.502 1.502 0 0 0 1.5 1.5h6a1.502 1.502 0 0 0 1.5-1.5v-6a1.502 1.502 0 0 0-1.5-1.5zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5z"},392055:function(e,t,i){i.d(t,{m:function(){return s}});let s="M0 1v14h16V1zm1 13V5h4v9zm14 0H6V5h9zm0-10h-1V3h-1v1H1V2h14z"},340110:function(e,t,i){i.d(t,{p:function(){return s}});let s="M2 5v22h28V5zm1 21V6h9v20zm26 0H13V6h16zM4 17h5v1H4zm0-3h7v1H4z"},278308:function(e,t,i){i.d(t,{v:function(){return s}});let s="M5 9H1.833A.834.834 0 0 1 1 8.167V1.833A.834.834 0 0 1 1.833 1h6.334A.834.834 0 0 1 9 1.833V5h1V1.833A1.835 1.835 0 0 0 8.167 0H1.833A1.835 1.835 0 0 0 0 1.833v6.334A1.835 1.835 0 0 0 1.833 10H5zm1.733-3.956A6.467 6.467 0 0 0 7.179 4H8V3H5.519l.128-.129L4.59 1.813l-.707.707.48.48H2v1h.768a6.176 6.176 0 0 0 1.418 2.414 5.84 5.84 0 0 1-1.79.768l.242.97A6.723 6.723 0 0 0 4.97 7.086c.011.008.025.014.036.022a2.167 2.167 0 0 1 1.727-2.064zM3.83 4h2.284a5.056 5.056 0 0 1-1.148 1.777A4.957 4.957 0 0 1 3.83 4zm10.362 12H7.808A1.81 1.81 0 0 1 6 14.192V7.808A1.81 1.81 0 0 1 7.808 6h6.384A1.81 1.81 0 0 1 16 7.808v6.384A1.81 1.81 0 0 1 14.192 16zM7.808 7A.809.809 0 0 0 7 7.808v6.384a.809.809 0 0 0 .808.808h6.384a.809.809 0 0 0 .808-.808V7.808A.809.809 0 0 0 14.192 7zm5.342 6.94l.899-.439L11 7.261l-3.049 6.24.899.44.46-.941h3.38zM9.798 12L11 9.54 12.202 12z"},433888:function(e,t,i){i.d(t,{V:function(){return s}});let s="M8 15H3.5A2.502 2.502 0 0 1 1 12.5v-9A2.502 2.502 0 0 1 3.5 1h9A2.502 2.502 0 0 1 15 3.5V8h-1V3.5A1.502 1.502 0 0 0 12.5 2h-9A1.502 1.502 0 0 0 2 3.5v9A1.502 1.502 0 0 0 3.5 14H8zm-.038-4.811a9.77 9.77 0 0 1-3.766 1.796l-.242-.97a8.816 8.816 0 0 0 3.282-1.532A9.264 9.264 0 0 1 4.888 5H4V4h3.279l-.544-.544.707-.707L8.692 4H12v1h-.914A9.836 9.836 0 0 1 9.78 8.152a3.853 3.853 0 0 0-1.82 2.037zm.032-1.383A8.167 8.167 0 0 0 10.058 5H5.922a8.18 8.18 0 0 0 2.072 3.806zM23 20.447v-8.894A2.525 2.525 0 0 0 20.484 9h-8.931A2.556 2.556 0 0 0 9 11.553v8.894A2.556 2.556 0 0 0 11.553 23h8.894A2.556 2.556 0 0 0 23 20.447zM20.484 10A1.517 1.517 0 0 1 22 11.516v8.968A1.517 1.517 0 0 1 20.484 22h-8.968A1.517 1.517 0 0 1 10 20.484v-8.968A1.517 1.517 0 0 1 11.516 10zm-2.086 8h-4.796l-1.159 2.23-.886-.46L16 11.215l4.443 8.555-.886.46zm-.52-1L16 13.385 14.122 17z"},925200:function(e,t,i){i.d(t,{M:function(){return s}});let s="M22.766 13.875c.063.058.128.11.189.17l5 5a6.3 6.3 0 0 1-8.91 8.91l-5-5a6.286 6.286 0 0 1 2.969-10.568 3.279 3.279 0 0 1 .553.905 5.288 5.288 0 0 0-2.815 8.956l5 5a5.3 5.3 0 0 0 7.496-7.496l-4.488-4.488a8.366 8.366 0 0 0 .006-1.389zm-12.526 3.86l-4.488-4.487a5.3 5.3 0 0 1 7.496-7.496l5 5a5.288 5.288 0 0 1-2.815 8.956 3.278 3.278 0 0 0 .553.905 6.287 6.287 0 0 0 2.969-10.568l-5-5a6.3 6.3 0 0 0-8.91 8.91l5 5c.061.06.126.112.189.17a8.367 8.367 0 0 1 .006-1.39z"},387651:function(e,t,i){i.d(t,{I:function(){return s}});let s="M12 16a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1zM5 1h7v1H5zm0 2h7v9H5zm0 10h7v2H9v-1H8v1H5z"},381e3:function(e,t,i){i.d(t,{G:function(){return s}});let s="M15.167 13a.834.834 0 0 0 .833-.834V1.834A.834.834 0 0 0 15.167 1H.833A.834.834 0 0 0 0 1.833v10.334A.834.834 0 0 0 .833 13H6v1H5v1h6v-1h-1v-1zM1 2h14v10H1zm8 12H7v-1h2z"},207258:function(e,t,i){i.d(t,{O:function(){return s}});let s="M4 1.571V14.43L14 8zm1 1.832l7.15 4.598L5 12.597z"},201857:function(e,t,i){i.d(t,{C:function(){return s}});let s="M6 1.773l15 10.23L6 22.226z"},942312:function(e,t,i){i.d(t,{B:function(){return s}});let s="M8 14h3v1H4v-1h3v-4H1V2H0V1h15v1h-1v3h-1V2H2v7h7v1H8v4zm7.928-8.121l-.707-.707L13 7.292l-2.221-2.22-.707.707L12.292 8l-2.22 2.221.707.707L13 8.708l2.221 2.22.707-.707L13.708 8l2.22-2.121z"},732368:function(e,t,i){i.d(t,{M:function(){return s}});let s="M22.719 12A10.719 10.719 0 0 1 1.28 12h.838a9.916 9.916 0 1 0 1.373-5H8v1H2V2h1v4.2A10.71 10.71 0 0 1 22.719 12z"},10111:function(e,t,i){i.d(t,{A:function(){return s}});let s="M11 7V6h3v9H3V6h3v1H4v7h9V7zM6.74 4L8 2.739V11h1V2.705L10.295 4l.324.324.707-.707L8.517.807l-2.809 2.81.707.707z"},435605:function(e,t,i){i.d(t,{$q:function(){return v},IF:function(){return u},K3:function(){return y},s7:function(){return I}});var s=i(202784),a=i(783112),o=i(614549),r=i(752179),n=i(140995),l=i(718895),p=i(504908),d=i(179463),c=i(876653),h=i(949843),m=i(517637);let u=e=>{(0,s.useEffect)(()=>{(0,o.Mq)(e)},[e])},g=e=>{let t=(0,s.useRef)();return{initialThemeItemInfo:e??t.current,setInitialThemeItemInfo:(0,s.useCallback)(e=>{t.current=e},[])}},f=e=>{let{itemType:t,isOrgItem:i,isEmbedded:s,headerQuery:a}=e;return!i||!!s&&"briefing"===t&&"false"!==a||(!s||"true"===a||""===a)&&"false"!==a},y=e=>{let{itemType:t,isOrgItem:i,isEmbedded:a,headerQuery:o}=e,r=(0,d.Z)(!0),n=(0,s.useMemo)(()=>f({itemType:t,isOrgItem:i,isEmbedded:a,headerQuery:o}),[i,a,t,o]);return!!r&&n},x=e=>{let{itemType:t,version:i,viewerMode:a,id:o,itemDetails:n,versionedItemData:l,authManager:p,storyMapUserPrivileges:d,config:c}=e,h=new r.Z({type:t,authManager:p,version:i,getStoryMapUserPrivileges:()=>d,viewerMode:a,config:c});return o&&(h.itemId=o),n&&(h.itemDetails=n),l&&(h.itemData=l),(0,s.useRef)(h).current},w=e=>{let{itemType:t,version:i,viewerMode:a,id:o,itemDetails:r,versionedItemData:l,authManager:p,storyMapUserPrivileges:d,config:c}=e,h=new n.ZP({type:t,authManager:p,version:i,getStoryMapUserPrivileges:()=>d,viewerMode:a,config:c});return o&&(h.itemId=o),r&&(h.itemDetails=r),l&&(h.itemDraftData=l),(0,s.useRef)(h).current},b=(0,c.e)(),v=(e,t)=>{let{id:i,itemDetails:a,publishedData:o,setLocaleFromPage:r,query:n,config:p,signInUrl:d,authManager:c,storyMapUserPrivileges:u}=t,[f,y]=(0,s.useState)(!b),w=x({itemType:e,version:"published",viewerMode:"view",authManager:c,storyMapUserPrivileges:u,config:p,...f?{id:i,itemDetails:a,versionedItemData:o}:{}}),{initialThemeItemInfo:v,setInitialThemeItemInfo:I}=g(t.initialThemeItemInfo);return(0,s.useEffect)(()=>{let t=!1;return(async()=>{try{if(!f){let i=await (0,h.A5)({id:n?.id,config:p,signInUrl:d,authManager:c,itemType:e,shouldRedirect:!0,convertRoute:m.Q});if(t||!i.success)return;let{id:s,itemDetails:a,publishedData:o,pageLocale:l,initialThemeItemInfo:u}=i;w.itemId=s,w.itemDetails=a,w.itemData=o,I(u),await r({pageLocale:l}),y(!0)}}catch(e){y(()=>{if(e instanceof l.Z)throw new l.Z(e);throw Error(e)})}})(),()=>{t=!0}},[w,I,f,e,r,n,p,d,c]),{isReady:f,storyItem:w,initialThemeItemInfo:v}},I=(e,t)=>{let{id:i,itemDetails:o,draftData:r,locale:n,setLocaleFromPage:d,query:c,config:u,signInUrl:f,authManager:y,storyMapUserPrivileges:x}=t,{formatMessage:v}=(0,a.Z)(),I=c?.id===p.BD||i===p.BD,[S,T]=(0,s.useState)(!(b||I)),k=w({itemType:e,version:"draft",viewerMode:"preview",authManager:y,storyMapUserPrivileges:x,config:u,...S?{id:i,itemDetails:o,versionedItemData:r}:{}}),{initialThemeItemInfo:A,setInitialThemeItemInfo:j}=g(t.initialThemeItemInfo);return(0,s.useEffect)(()=>{let t=!1;return(async()=>{try{if(!S){I&&await d({pageLocale:n});let i=await (0,h.tz)({id:c?.id,config:u,signInUrl:f,authManager:y,formatMessage:v,itemType:e,shouldRedirect:!0,convertRoute:m.Q});if(t||!i.success)return;let{id:s,itemDetails:a,draftData:o,pageLocale:r,initialThemeItemInfo:l}=i;k.itemId=s,k.itemDetails=a,k.itemDraftData=o,j(l),I||await d({pageLocale:r}),T(!0)}}catch(e){T(()=>{if(e instanceof l.Z)throw new l.Z(e);throw Error(e)})}})(),()=>{t=!0}},[k,j,S,e,n,d,c,u,f,y,I,v]),{isReady:S,storyItem:k,initialThemeItemInfo:A,mode:c?.mode||"preview"}}},89393:function(e,t,i){i.d(t,{b:function(){return r}});var s=i(718895),a=i(497872),o=i(517637);let r=e=>{let{itemType:t,dataPreparer:i,privilegesChecker:r}=e;return async(e,n)=>{let{id:l}=e.query,{authManager:p,config:d,signInUrl:c,storyMapUserPrivileges:h}=n,m=r?.(h);if(m)throw m;if("string"!=typeof l||!(0,a.J)(l))throw new s.Z({type:"story-inaccessible",itemType:t});return await i({ctx:e,id:l,config:d,authManager:p,signInUrl:c,itemType:t,shouldRedirect:!0,convertRoute:o.Q})}}},92061:function(e,t,i){i.d(t,{h:function(){return h}});var s=i(552322),a=i(742951),o=i.n(a);i(202784);var r=i(412524),n=i.n(r),l=i(663010),p=i(326860),d=i(103010),c=i(416633);let h=e=>{let t=(0,l.z$)(),i=e.trackingEventData?t.getDataAttributes(e.trackingEventData):{},a={styles:(0,s.jsx)(o(),{id:"fdb33912e95ade24",children:".media-toolbar-button.flipped.jsx-fdb33912e95ade24{-webkit-transform:scale(-1,1);-moz-transform:scale(-1,1);-ms-transform:scale(-1,1);-o-transform:scale(-1,1);transform:scale(-1,1)}"}),className:"jsx-fdb33912e95ade24"},r=(0,s.jsx)(p.ZP,{type:e.type??"single-icon",id:e.buttonId,onClick:e.onClick,className:n()("media-toolbar-button",a.className,{flipped:e.shouldFlip}),disabled:e.disabled,"aria-label":e.tooltipContent,...i,"aria-pressed":e["aria-pressed"]&&!e.disabled,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],onMouseLeave:e.onMouseLeave,testId:e.buttonId,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{...e.iconProps,size:16}),e.buttonTextContent,a.styles]})});return(0,s.jsxs)(c.u,{children:[(0,s.jsx)(c.aJ,{children:e.renderButton?.(r)??r}),(0,s.jsx)(c._v,{children:e.tooltipContent})]},e.buttonId)};t.Z=h},417209:function(e,t,i){var s=i(552322),a=i(742951),o=i.n(a),r=i(202784),n=i(412524),l=i.n(n),p=i(980860);let d=(0,r.memo)(e=>{let{isShowing:t,toggleStoryOverlay:i,isInvisible:a}=e,{backgroundColor:n}=(0,p.XL)(),[d,c]=(0,r.useState)(t);(0,r.useEffect)(()=>{t&&c(!0)},[t]);let h=async()=>{i&&(window.scrollTo(0,0),await i(!1),t||c(!1))};return(0,s.jsxs)(s.Fragment,{children:[d&&(0,s.jsx)("div",{onAnimationEnd:h,className:o().dynamic([["8caa15c645e5651",[n,a?0:1]]])+" "+(l()("story-overlay",{"fade-in":!a&&t,"fade-out":!a&&!t})||"")}),(0,s.jsx)(o(),{id:"8caa15c645e5651",dynamic:[n,a?0:1],children:`.story-overlay.__jsx-style-dynamic-selector{background-color:${n};position:fixed;width:100%;height:100%;top:0;left:0;right:0;bottom:0;z-index:2;opacity:${a?0:1};pointer-events:none}.fade-in.__jsx-style-dynamic-selector{-webkit-animation:fadeIn 250ms ease-in;-moz-animation:fadeIn 250ms ease-in;-o-animation:fadeIn 250ms ease-in;animation:fadeIn 250ms ease-in}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}.fade-out.__jsx-style-dynamic-selector{-webkit-animation:fadeOut 250ms ease-out;-moz-animation:fadeOut 250ms ease-out;-o-animation:fadeOut 250ms ease-out;animation:fadeOut 250ms ease-out}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@-moz-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@-o-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}`})]})});t.Z=d},590991:function(e,t,i){i.d(t,{AD:function(){return g},An:function(){return p},Cd:function(){return o},Cx:function(){return s},Kj:function(){return l},O4:function(){return c},XR:function(){return h},fS:function(){return d},jf:function(){return a},l:function(){return m},li:function(){return n},oc:function(){return u},qi:function(){return f},sk:function(){return r}});let s="item-end-reached",a="stop-scrolling-item",o="autoplay-next-item",r="toggle-item-autoplay",n="toggle-item-speed",l="reset-item",p="iframe-ready-for-communication",d="enable-item-autoplay",c="disable-item-autoplay",h="update-parent-pause",m="active-item-iframe",u=1500,g=1e3,f={slow:{displaySpeed:"1/2x",pageScrollDelay:40,collectionAutoplayDuration:12e4,briefingAutoplayDuration:6e4},medium:{displaySpeed:"1x",pageScrollDelay:20,collectionAutoplayDuration:6e4,briefingAutoplayDuration:3e4},fast:{displaySpeed:"2x",pageScrollDelay:10,collectionAutoplayDuration:3e4,briefingAutoplayDuration:15e3}}},823967:function(e,t,i){i.d(t,{Z:function(){return e3}});var s,a=i(552322),o=i(742951),r=i.n(o),n=i(202784),l=i(342670),p=i(289274),d=i(412524),c=i.n(d),h=i(97729),m=i.n(h),u=i(249490),g=i(790007),f=i(788028),y=i(578166),x=i(355125),w=i(362851),b=i(816211),v=i(809518),I=i(293786),S=i(999354),T=i(92340),k=i(522532),A=i(820666),j=i(850358),D=i(819556),C=i(2519),P=i(558323),$=i(558001),_=i(65483),M=i(103010),L=i(537905),E=e=>{let t=(0,L.Z)(),{theme:i}=(0,g.Fj)(),s=(0,b.uw)();return(0,a.jsxs)("div",{className:r().dynamic([["19138b3a2db3c2bc",[f.default.spacing.sm,$.ZP.shadow.sm(),$.ZP.overflowWrap(),f.default.spacing.xxs,f.default.spacing.xxs,f.default.spacing.xxs,f.default.color.white,f.default.spacing.xs,f.default.spacing.xxs,$.ZP.typography.subtitleSmall(),f.default.color.darkGreen,f.default.spacing.xxxs,f.default.spacing.xs,f.default.spacing.md,$.ZP.typography.bodySmall(),f.default.color.cadet,f.default.spacing.xs,f.default.spacing.xs,f.default.spacing.xxs,i.colors.labelLink,$.ZP.typography.bodyLarge(),f.default.spacing.xxxxs,f.default.spacing.xxxxs,f.default.spacing.xxxs,y.Kk.RTL,f.default.spacing.xxxxs,f.default.responsiveBreakpoints.large,f.default.responsiveBreakpoints.extraLarge]]])+" container",children:[(0,a.jsx)("h3",{className:r().dynamic([["19138b3a2db3c2bc",[f.default.spacing.sm,$.ZP.shadow.sm(),$.ZP.overflowWrap(),f.default.spacing.xxs,f.default.spacing.xxs,f.default.spacing.xxs,f.default.color.white,f.default.spacing.xs,f.default.spacing.xxs,$.ZP.typography.subtitleSmall(),f.default.color.darkGreen,f.default.spacing.xxxs,f.default.spacing.xs,f.default.spacing.md,$.ZP.typography.bodySmall(),f.default.color.cadet,f.default.spacing.xs,f.default.spacing.xs,f.default.spacing.xxs,i.colors.labelLink,$.ZP.typography.bodyLarge(),f.default.spacing.xxxxs,f.default.spacing.xxxxs,f.default.spacing.xxxs,y.Kk.RTL,f.default.spacing.xxxxs,f.default.responsiveBreakpoints.large,f.default.responsiveBreakpoints.extraLarge]]])+" title",children:t("component.builderHeader.storySettings.analytics.message.title")}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.message},className:r().dynamic([["19138b3a2db3c2bc",[f.default.spacing.sm,$.ZP.shadow.sm(),$.ZP.overflowWrap(),f.default.spacing.xxs,f.default.spacing.xxs,f.default.spacing.xxs,f.default.color.white,f.default.spacing.xs,f.default.spacing.xxs,$.ZP.typography.subtitleSmall(),f.default.color.darkGreen,f.default.spacing.xxxs,f.default.spacing.xs,f.default.spacing.md,$.ZP.typography.bodySmall(),f.default.color.cadet,f.default.spacing.xs,f.default.spacing.xs,f.default.spacing.xxs,i.colors.labelLink,$.ZP.typography.bodyLarge(),f.default.spacing.xxxxs,f.default.spacing.xxxxs,f.default.spacing.xxxs,y.Kk.RTL,f.default.spacing.xxxxs,f.default.responsiveBreakpoints.large,f.default.responsiveBreakpoints.extraLarge]]])+" message-container"}),(0,a.jsx)(_.Z,{primaryButtonTitle:t("component.builderHeader.storySettings.analytics.message.button.allow"),onPrimaryButtonClick:e.onAllowClicked,orientation:s.isViewportMinWidth("medium")?"horizontal":"vertical",startContent:(0,a.jsx)("h4",{className:r().dynamic([["19138b3a2db3c2bc",[f.default.spacing.sm,$.ZP.shadow.sm(),$.ZP.overflowWrap(),f.default.spacing.xxs,f.default.spacing.xxs,f.default.spacing.xxs,f.default.color.white,f.default.spacing.xs,f.default.spacing.xxs,$.ZP.typography.subtitleSmall(),f.default.color.darkGreen,f.default.spacing.xxxs,f.default.spacing.xs,f.default.spacing.md,$.ZP.typography.bodySmall(),f.default.color.cadet,f.default.spacing.xs,f.default.spacing.xs,f.default.spacing.xxs,i.colors.labelLink,$.ZP.typography.bodyLarge(),f.default.spacing.xxxxs,f.default.spacing.xxxxs,f.default.spacing.xxxs,y.Kk.RTL,f.default.spacing.xxxxs,f.default.responsiveBreakpoints.large,f.default.responsiveBreakpoints.extraLarge]]])+" footer-label",children:t("component.builderHeader.storySettings.analytics.message.allowTracking")})}),(0,a.jsx)("button",{"aria-label":t("common.close"),onClick:e.onDismissClicked,className:r().dynamic([["19138b3a2db3c2bc",[f.default.spacing.sm,$.ZP.shadow.sm(),$.ZP.overflowWrap(),f.default.spacing.xxs,f.default.spacing.xxs,f.default.spacing.xxs,f.default.color.white,f.default.spacing.xs,f.default.spacing.xxs,$.ZP.typography.subtitleSmall(),f.default.color.darkGreen,f.default.spacing.xxxs,f.default.spacing.xs,f.default.spacing.md,$.ZP.typography.bodySmall(),f.default.color.cadet,f.default.spacing.xs,f.default.spacing.xs,f.default.spacing.xxs,i.colors.labelLink,$.ZP.typography.bodyLarge(),f.default.spacing.xxxxs,f.default.spacing.xxxxs,f.default.spacing.xxxs,y.Kk.RTL,f.default.spacing.xxxxs,f.default.responsiveBreakpoints.large,f.default.responsiveBreakpoints.extraLarge]]])+" close-button",children:(0,a.jsx)(M.Z,{path:P.n,size:16,fill:i.colors.labelPrimary})}),(0,a.jsx)(r(),{id:"19138b3a2db3c2bc",dynamic:[f.default.spacing.sm,$.ZP.shadow.sm(),$.ZP.overflowWrap(),f.default.spacing.xxs,f.default.spacing.xxs,f.default.spacing.xxs,f.default.color.white,f.default.spacing.xs,f.default.spacing.xxs,$.ZP.typography.subtitleSmall(),f.default.color.darkGreen,f.default.spacing.xxxs,f.default.spacing.xs,f.default.spacing.md,$.ZP.typography.bodySmall(),f.default.color.cadet,f.default.spacing.xs,f.default.spacing.xs,f.default.spacing.xxs,i.colors.labelLink,$.ZP.typography.bodyLarge(),f.default.spacing.xxxxs,f.default.spacing.xxxxs,f.default.spacing.xxxs,y.Kk.RTL,f.default.spacing.xxxxs,f.default.responsiveBreakpoints.large,f.default.responsiveBreakpoints.extraLarge],children:`.container.__jsx-style-dynamic-selector{--space-from-bottom:${f.default.spacing.sm};${$.ZP.shadow.sm()}
          ${$.ZP.overflowWrap()}
          position: fixed;z-index:9999;bottom:var(--space-from-bottom);left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%);width:100%;max-width:-webkit-calc(100% - ${f.default.spacing.xxs} - ${f.default.spacing.xxs});max-width:-moz-calc(100% - ${f.default.spacing.xxs} - ${f.default.spacing.xxs});max-width:calc(100% - ${f.default.spacing.xxs} - ${f.default.spacing.xxs});max-height:-webkit-calc(100vh - var(--space-from-bottom) - ${f.default.spacing.xxs});max-height:-moz-calc(100vh - var(--space-from-bottom) - ${f.default.spacing.xxs});max-height:calc(100vh - var(--space-from-bottom) - ${f.default.spacing.xxs});display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background-color:${f.default.color.white};padding:${f.default.spacing.xs} 0 ${f.default.spacing.xxs}}.title.__jsx-style-dynamic-selector{${$.ZP.typography.subtitleSmall()}
          color: ${f.default.color.darkGreen};margin-bottom:${f.default.spacing.xxxs};-webkit-padding-start:${f.default.spacing.xs};-moz-padding-start:${f.default.spacing.xs};padding-inline-start:${f.default.spacing.xs};-webkit-padding-end:${f.default.spacing.md};-moz-padding-end:${f.default.spacing.md};padding-inline-end:${f.default.spacing.md}}.message-container.__jsx-style-dynamic-selector{${$.ZP.typography.bodySmall()}
          overflow-y: auto;color:${f.default.color.cadet};-webkit-padding-start:${f.default.spacing.xs};-moz-padding-start:${f.default.spacing.xs};padding-inline-start:${f.default.spacing.xs};-webkit-padding-end:${f.default.spacing.xs};-moz-padding-end:${f.default.spacing.xs};padding-inline-end:${f.default.spacing.xs};padding-bottom:${f.default.spacing.xxs}}.message-container.__jsx-style-dynamic-selector a,.message-container.__jsx-style-dynamic-selector a:visited{color:${i.colors.labelLink}}.footer-label.__jsx-style-dynamic-selector{${$.ZP.typography.bodyLarge()}
        }.close-button.__jsx-style-dynamic-selector{position:absolute;top:${f.default.spacing.xxxxs};right:${f.default.spacing.xxxxs};padding:${f.default.spacing.xxxs};line-height:0}${y.Kk.RTL} .close-button.__jsx-style-dynamic-selector{right:unset;left:${f.default.spacing.xxxxs}}@media(min-width:${f.default.responsiveBreakpoints.large}){.container.__jsx-style-dynamic-selector{width:75%;max-width:${f.default.responsiveBreakpoints.extraLarge}}}`})]})},z=i(486693),R=i(980860),B=i(863292),H=i(567523),Z=i(340733),O=i(65032),N=i(45324),U=i(212908),V=i(544213),F=i(400983),W=i(177692),K=i(276886),q=i(725270),G=i(6921),Y=i(417209),X=i(23027),J=i(46691),Q=i(732368),ee=i(201857),et=i(326860);let ei={"1/2x":"M15 23H8.1v-.5c0-2.157 1.762-3.105 3.316-3.942 1.392-.748 2.593-1.394 2.593-2.721 0-1.046-1.184-1.837-2.47-1.855a2.38 2.38 0 0 0-2.001.72A2.118 2.118 0 0 0 8.973 16h-.97a2.954 2.954 0 0 1 .823-2 3.437 3.437 0 0 1 2.727-1c1.828 0 3.438 1.245 3.438 2.837 0 1.924-1.639 2.815-3.1 3.602-1.273.685-2.482 1.335-2.74 2.561H15zM11 3.422l-.916-.4-8.077 18.57.916.4zM4 2.207L1.011 3.634l.43.903L3 3.793v8.167h1zM22.689 9L20.5 11.696 18.311 9h-1.306l2.842 3.5-2.842 3.5h1.306l2.189-2.696L22.689 16h1.306l-2.842-3.5L23.995 9z","1x":"M9 21H8V4.743L4.804 6l-.377-.882L9 3.257zm9.689-12L16.5 11.696 14.311 9h-1.306l2.842 3.5-2.842 3.5h1.306l2.189-2.696L18.689 16h1.306l-2.842-3.5L19.995 9z","2x":"M13 20H2.004v-.5c0-3.497 2.885-5.076 5.43-6.469 2.352-1.287 4.575-2.504 4.575-5.007a4.172 4.172 0 0 0-4.173-4.038A4.693 4.693 0 0 0 4.31 5.304a5.604 5.604 0 0 0-1.315 3.685l-.989.005A6.475 6.475 0 0 1 3.59 4.611a5.63 5.63 0 0 1 4.246-1.598A5.155 5.155 0 0 1 13 8.024c0 3.096-2.581 4.514-5.086 5.884-2.376 1.3-4.627 2.532-4.886 5.092H13zm8.689-11L19.5 11.696 17.311 9h-1.306l2.842 3.5-2.842 3.5h1.306l2.189-2.696L21.689 16h1.306l-2.842-3.5L22.995 9z"};class es extends n.PureComponent{constructor(e){super(e),this.setHoverState=()=>{this.state.isHovering||this.setState({isShowing:!0,isHovering:!0})},this.removeHoverState=()=>{this.state.isHovering&&this.setState({isHovering:!1})},this.state={isShowing:this.props.isShowing,isHovering:!1}}componentDidUpdate(){this.props.isShowing===this.state.isShowing||this.state.isHovering||this.setState({isShowing:this.props.isShowing})}render(){let e=this.state.isShowing?"visible":"hidden",t=this.props.intl.formatMessage({id:"component.autoplay.returnToTop"}),i=this.props.intl.formatMessage({id:"common.autoplay.play"}),s=this.props.intl.formatMessage({id:"common.autoplay.pause"}),o=this.props.intl.formatMessage({id:"component.autoplay.toggleSpeed"});return(0,a.jsxs)("div",{onMouseEnter:this.setHoverState,onMouseLeave:this.removeHoverState,className:r().dynamic([["912d6e49f6b2d5e7",[this.props.appOffset.bottom,f.default.spacing.xxl,f.default.spacing.xxxxs,$.ZP.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),e,this.state.isShowing?1:0,f.default.spacing.xs,f.default.spacing.md,$.ZP.gapped({direction:"horizontal",gap:f.default.spacing.xs,alignItems:"center",justifyContent:"center"})]]])+" autoplay",children:[(0,a.jsxs)("div",{className:r().dynamic([["912d6e49f6b2d5e7",[this.props.appOffset.bottom,f.default.spacing.xxl,f.default.spacing.xxxxs,$.ZP.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),e,this.state.isShowing?1:0,f.default.spacing.xs,f.default.spacing.md,$.ZP.gapped({direction:"horizontal",gap:f.default.spacing.xs,alignItems:"center",justifyContent:"center"})]]])+" autoplay-controls-wrapper",children:[(0,a.jsx)(et.ZP,{type:"single-icon",onClick:this.props.onResetClick,"aria-label":t,children:(0,a.jsx)(M.Z,{path:Q.M})}),this.props.isPlaying?(0,a.jsx)(et.ZP,{type:"single-icon",onClick:this.props.onPlayToggle,"aria-label":s,children:(0,a.jsx)(M.Z,{path:"M4 2h6v20H4zm10 20h6V2h-6z"})}):(0,a.jsx)(et.ZP,{type:"single-icon",onClick:this.props.onPlayToggle,"aria-label":i,children:(0,a.jsx)(M.Z,{path:ee.C})}),(0,a.jsx)(et.ZP,{type:"single-icon",onClick:this.props.onSpeedToggle,"aria-label":o,children:(0,a.jsx)(M.Z,{path:ei[this.props.speed]})})]}),(0,a.jsx)(r(),{id:"912d6e49f6b2d5e7",dynamic:[this.props.appOffset.bottom,f.default.spacing.xxl,f.default.spacing.xxxxs,$.ZP.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),e,this.state.isShowing?1:0,f.default.spacing.xs,f.default.spacing.md,$.ZP.gapped({direction:"horizontal",gap:f.default.spacing.xs,alignItems:"center",justifyContent:"center"})],children:`.autoplay.__jsx-style-dynamic-selector{position:fixed;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%);bottom:-webkit-calc(${this.props.appOffset.bottom} + ${f.default.spacing.xxl});bottom:-moz-calc(${this.props.appOffset.bottom} + ${f.default.spacing.xxl});bottom:calc(${this.props.appOffset.bottom} + ${f.default.spacing.xxl});-webkit-border-radius:${f.default.spacing.xxxxs};-moz-border-radius:${f.default.spacing.xxxxs};border-radius:${f.default.spacing.xxxxs};background-color:${$.ZP.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85)};z-index:10;visibility:${e};opacity:${this.state.isShowing?1:0};-webkit-transition:opacity.5s linear,visibility.5s linear;-moz-transition:opacity.5s linear,visibility.5s linear;-o-transition:opacity.5s linear,visibility.5s linear;transition:opacity.5s linear,visibility.5s linear;padding:${f.default.spacing.xs} ${f.default.spacing.md}}.autoplay-controls-wrapper.__jsx-style-dynamic-selector{${$.ZP.gapped({direction:"horizontal",gap:f.default.spacing.xs,alignItems:"center",justifyContent:"center"})};}`})]})}}var ea=(0,g.EL)((0,Z.Jh)((0,p.ZP)(es))),eo=i(590991);class er extends n.PureComponent{constructor(e){var t;super(e),t=this,this.lastMouseMoveTime=0,this.lastScrollTime=0,this.isReaderScrolling=!1,this.autoplayNode=(0,n.createRef)(),this.autoplayEnabledSetup=async()=>{(0,T.xR)()||this.toggleAutoplay(),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("wheel",this.handleWindowScroll),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("touchstart",this.handleMouseDown),this.interactionTimer=window.setInterval(this.interactionDelayCheck,500),this.props.collectionBlock&&(await this.props.collectionBlock?.do("switchToCurrentActiveItem"),this.autoplayCollectionItem()),this.props.storyItem.type===I.o.Briefing&&this.autoplayBriefingSlide()},this.autoplayDisabledCleanup=()=>{clearInterval(this.interactionTimer),clearInterval(this.scrollTimer),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("wheel",this.handleWindowScroll),window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("touchstart",this.handleMouseDown),clearTimeout(this.collectionTimeoutId),clearTimeout(this.briefingTimeoutId),this.postMessageToActiveItemIframe(eo.O4)},this.onReceiveMessage=e=>{e.origin===window.location.origin&&((0,T.xR)()?(e.data.method===eo.jf&&window.parent.postMessage({method:eo.Cd},window.location.origin),e.data.method===eo.fS&&e.data.speed&&(this.props.enableAutoplay(),this.props.updateAutoplaySpeed(e.data.speed),this.props.isAutoplayPaused&&this.toggleAutoplay()),e.data.method!==eo.O4||(this.props.disableAutoplay(),this.props.isAutoplayPaused||this.toggleAutoplay()),e.data.method===eo.sk&&this.toggleAutoplay(),e.data.method===eo.li&&e.data.speed&&this.props.updateAutoplaySpeed(e.data.speed),e.data.method===eo.Kj&&(this.props.onItemEndReached?.(),this.props.updateIsAutoplayPaused(!1),this.scrollPage())):(this.props.isAutoplayEnabled&&e.data.method===eo.An&&e.source?.postMessage({method:eo.fS,speed:this.props.autoplaySpeed}),e.data.method===eo.Cx&&e.source?.postMessage({method:eo.jf}),e.data.method===eo.Cd&&this.switchToNextItem(),e.data.method===eo.XR&&"boolean"==typeof e.data.isPaused&&this.props.isAutoplayPaused!==e.data.isPaused&&this.props.updateIsAutoplayPaused(e.data.isPaused)))},this.switchToNextItem=async e=>{await this.props.collectionBlock?.do("switchToNextItem",e),this.autoplayCollectionItem()},this.switchToFirstCollectionItem=()=>{this.switchToNextItem(0)},this.autoplayCollectionItem=()=>{clearTimeout(this.collectionTimeoutId);let e=eo.qi[this.props.autoplaySpeed].collectionAutoplayDuration;this.collectionTimeoutId=setTimeout(()=>{let e=this.props.collectionBlock?.do("getActiveItemBlock");if(!e)return;let t=e.do("isStoryMap"),i=e.do("getBlockItemType"),s=e.do("getItemUrl"),a=s?.startsWith(window?.origin);("embed"!==i||!a)&&(t&&a||this.switchToNextItem())},e)},this.postMessageToActiveItemIframe=(e,t)=>{let i=document.querySelector(`.${eo.l}`)?.contentWindow;i?.postMessage({method:e,...t})},this.autoplayBriefingSlide=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=eo.qi[t.props.autoplaySpeed].briefingAutoplayDuration,s=t.props.briefingDisplay.totalNumberOfSlides,a=t.props.briefingDisplay.currentIndex,o=a===s-1,r=a+1;if(clearTimeout(t.briefingTimeoutId),e){t.props.updateBriefingDisplay({currentIndex:0});return}t.briefingTimeoutId=setTimeout(()=>{if(o)return t.jumpToTop();t.props.updateBriefingDisplay({currentIndex:r})},i)},this.toggleAutoplay=e=>{let t=!this.props.isAutoplayPaused;e?.preventDefault(),this.props.updateIsAutoplayPaused(t),this.props.collectionBlock?(this.postMessageToActiveItemIframe(eo.sk),t?clearTimeout(this.collectionTimeoutId):this.autoplayCollectionItem()):this.props.storyItem.type===I.o.Briefing?t?clearTimeout(this.briefingTimeoutId):this.autoplayBriefingSlide():(window.parent.postMessage({method:eo.XR,isPaused:t}),this.scrollPage())},this.handleWindowScroll=e=>{(e.deltaY>0||e.deltaY<0)&&(this.updateScrollTime(),this.isReaderScrolling=!0,this.props.isAutoplayPaused||(this.props.updateIsAutoplayPaused(!0),clearTimeout(this.collectionTimeoutId),clearTimeout(this.briefingTimeoutId),this.postMessageToActiveItemIframe(eo.sk)))},this.handleMouseDown=e=>{this.props.isAutoplayPaused||this.autoplayNode.current?.contains(e.target)||(this.props.updateIsAutoplayPaused(!0),clearInterval(this.scrollTimer),clearTimeout(this.collectionTimeoutId),clearTimeout(this.briefingTimeoutId),this.postMessageToActiveItemIframe(eo.sk))},this.updateScrollTime=()=>{this.lastScrollTime=Date.now()},this.handleMouseMove=()=>{this.lastMouseMoveTime=Date.now(),this.setState({areAutoplayControlsShowing:!0})},this.interactionDelayCheck=()=>{if(!this.autoplayNode.current){clearInterval(this.interactionTimer);return}this.isReaderScrolling?this.onReaderScrolling():this.onReaderNotScrolling()},this.onReaderScrolling=()=>{Date.now()>this.lastScrollTime+eo.AD?this.isReaderScrolling=!1:this.setState({areAutoplayControlsShowing:!0})},this.onReaderNotScrolling=()=>{Date.now()>this.lastMouseMoveTime+eo.oc&&!this.props.isAutoplayPaused?this.setState({areAutoplayControlsShowing:!1}):this.setState({areAutoplayControlsShowing:!0})},this.toggleAutoplaySpeed=()=>{"fast"===this.props.autoplaySpeed?this.props.updateAutoplaySpeed("slow"):"slow"===this.props.autoplaySpeed?this.props.updateAutoplaySpeed("medium"):this.props.updateAutoplaySpeed("fast")},this.onResetClick=()=>{this.props.collectionBlock?(clearTimeout(this.collectionTimeoutId),this.switchToFirstCollectionItem(),this.postMessageToActiveItemIframe(eo.Kj),this.props.updateIsAutoplayPaused(!1)):this.props.storyItem.type===I.o.Briefing?(this.autoplayBriefingSlide(!0),this.props.updateIsAutoplayPaused(!1)):this.jumpToTop()},this.jumpToTop=()=>{this.props.onItemEndReached?.(),window.parent.postMessage({method:eo.Cx},window.location.origin),this.props.updateIsAutoplayPaused(!1),this.scrollPage()},this.scrollPage=()=>{let e=eo.qi[this.props.autoplaySpeed].pageScrollDelay;clearInterval(this.scrollTimer),this.scrollTimer=window.setInterval(()=>{if(this.props.isAutoplayPaused||!this.autoplayNode.current){clearInterval(this.scrollTimer);return}0===window.scrollY?(clearInterval(this.scrollTimer),setTimeout(()=>{window.scrollBy(0,2),this.scrollPage()},2e3)):Math.round(window.innerHeight+window.scrollY)>=document.body.offsetHeight?(clearInterval(this.scrollTimer),setTimeout(this.jumpToTop,3e3)):window.scrollBy(0,2)},e)},this.state={areAutoplayControlsShowing:!1}}componentDidMount(){window.addEventListener("message",this.onReceiveMessage,!1),(0,T.xR)()&&window.parent.postMessage({method:eo.An},window.location.origin)}componentDidUpdate(e,t){e.autoplaySpeed!==this.props.autoplaySpeed&&(this.scrollPage(),this.postMessageToActiveItemIframe(eo.li,{speed:this.props.autoplaySpeed}),this.autoplayBriefingSlide()),!e.isAutoplayEnabled&&this.props.isAutoplayEnabled&&this.autoplayEnabledSetup(),e.isAutoplayEnabled&&!this.props.isAutoplayEnabled&&this.autoplayDisabledCleanup(),(0,T.xR)()&&!this.props.isAutoplayEnabled&&window.parent.postMessage({method:eo.An},window.location.origin);let i=this.props.collectionDisplay.isCoverShowing;!e.collectionDisplay.isCoverShowing&&i&&this.props.isAutoplayEnabled&&this.props.disableAutoplay(),this.props.isAutoplayEnabled&&!this.props.isAutoplayPaused&&this.props.storyItem.type===I.o.Briefing&&this.props.briefingDisplay.currentIndex!==e.briefingDisplay.currentIndex&&this.autoplayBriefingSlide()}componentWillUnmount(){window.removeEventListener("message",this.onReceiveMessage,!1),this.autoplayDisabledCleanup()}render(){return this.props.isAutoplayEnabled?(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(G.Z,{triggerKey:" ",on:this.toggleAutoplay}),!this.props.isAutoplayPaused&&(0,a.jsx)(Y.Z,{isShowing:!0,isInvisible:!0}),(0,a.jsx)("div",{ref:this.autoplayNode,children:(0,a.jsx)(ea,{isShowing:!(0,T.xR)()&&this.state.areAutoplayControlsShowing,speed:eo.qi[this.props.autoplaySpeed].displaySpeed,isPlaying:!this.props.isAutoplayPaused,onResetClick:this.onResetClick,onPlayToggle:this.toggleAutoplay,onSpeedToggle:this.toggleAutoplaySpeed})})]}):null}}var en=(0,J.Z)((s=(0,N.p)((0,q.HH)(er)),class extends n.PureComponent{render(){return(0,a.jsx)(X.G.Consumer,{children:e=>(0,a.jsx)(s,{...this.props,...e})})}})),el=i(982465),ep=i(470030),ed=i(727962);let ec=e=>{let t=(0,R.XL)(),i=(0,g.Fj)().theme;return{currentWebsiteThemeColors:i.colors,currentThemeVariables:t,...(0,ed.O)({themeVariables:t,websiteTheme:i,flavor:e})}},eh=e=>{let{className:t}=e,{foregroundColor:i}=ec(I.o.Briefing),{theme:s,productVariables:o}=(0,g.Fj)(),{isExpanded:n}=(0,V.Gt)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{...n&&{inert:!0},className:r().dynamic([["21f44bde398953e6",[i,s.colors.backgroundOverlay,f.default.spacing.xxxxs,o.borderRadius.regular,o.borderRadius.regular,$.ZP.center()]]])+" "+(c()("briefing-compact-header",t)||""),children:(0,a.jsx)(ep.Z,{})}),(0,a.jsx)(r(),{id:"21f44bde398953e6",dynamic:[i,s.colors.backgroundOverlay,f.default.spacing.xxxxs,o.borderRadius.regular,o.borderRadius.regular,$.ZP.center()],children:`.briefing-compact-header.__jsx-style-dynamic-selector{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;color:${i};background-color:${s.colors.backgroundOverlay};padding:${f.default.spacing.xxxxs};-webkit-border-radius:0 0 ${o.borderRadius.regular} ${o.borderRadius.regular};-moz-border-radius:0 0 ${o.borderRadius.regular} ${o.borderRadius.regular};border-radius:0 0 ${o.borderRadius.regular} ${o.borderRadius.regular};${$.ZP.center()}
        }`})]})},em=()=>{let{hasSpaceForHeader:e}=(0,el.r)(),[t,i]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{},[e]),e)return null;let s="briefing-conditional-compact-header",{className:o,styles:l}={styles:(0,a.jsx)(r(),{id:"3ce4ac242f3808b3",dynamic:[s,10,s,s],children:`.${s}.__jsx-style-dynamic-selector{z-index:10;position:fixed;top:0;left:50%;-webkit-transform:translatex(-50%)translatey(-100%);-moz-transform:translatex(-50%)translatey(-100%);-ms-transform:translatex(-50%)translatey(-100%);-o-transform:translatex(-50%)translatey(-100%);transform:translatex(-50%)translatey(-100%);-webkit-transition:-webkit-transform.6s;-moz-transition:-moz-transform.6s;-o-transition:-o-transform.6s;transition:-webkit-transform.6s;transition:-moz-transform.6s;transition:-o-transform.6s;transition:transform.6s}.${s}.__jsx-style-dynamic-selector:is(.show,:focus-within){-webkit-transform:translatex(-50%)translatey(0);-moz-transform:translatex(-50%)translatey(0);-ms-transform:translatex(-50%)translatey(0);-o-transform:translatex(-50%)translatey(0);transform:translatex(-50%)translatey(0)}@media(prefers-reduced-motion:reduce){.${s}.__jsx-style-dynamic-selector{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}}`}),className:r().dynamic([["3ce4ac242f3808b3",[s,10,s,s]]])};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh,{className:c()(o,s,{show:t})}),l]})};var eu=i(413329),eg=i(79338),ef=i(111109),ey=i(136630),ex=i(332795);let ew={phone:{landscape:{width:734,height:388,fileName:"frame-phone-landscape.png"},portrait:{width:388,height:734,fileName:"frame-phone.png"}},tablet:{landscape:{width:1100,height:782,fileName:"frame-tablet-landscape.png"},portrait:{width:782,height:1100,fileName:"frame-tablet.png"}},desktop:{landscape:{width:1370,height:878,fileName:"frame-desktop.png"},portrait:{width:1370,height:878,fileName:"frame-desktop.png"}}};class eb extends n.Component{constructor(e){super(e),this.margins={top:65,bottom:130,side:65},this.scaleWrapper=(0,n.createRef)(),this.scaledPreview=(0,n.createRef)(),this.previewIframe=(0,n.createRef)(),this.handleResize=()=>{this.forceUpdate()},this.findTransformScale=()=>{let e=this.scaleWrapper.current?.getBoundingClientRect();if(!e)return 1;let t=ew[this.props.device];return+Math.min(Math.min(Math.round(e.height-this.margins.top-this.margins.bottom)/t.portrait.height,1),Math.min(Math.round(e.width-2*this.margins.side)/t.landscape.width,1)).toFixed(2)},this.findTopPosition=e=>{if(!this.scaleWrapper.current||!this.scaledPreview.current)return 0;let t=Math.round(this.scaleWrapper.current.getBoundingClientRect().height),i=Math.round(e||this.scaledPreview.current.getBoundingClientRect().height);return this.margins.top+(t-i-this.margins.top-this.margins.bottom)/2},this.handleResizeDebouncedly=(0,ey.Ds)(this.handleResize,200)}componentDidMount(){this.forceUpdate(),this.scrollWindowToTop(),window.addEventListener("resize",this.handleResizeDebouncedly)}componentDidUpdate(e){(e.device!==this.props.device||e.orientation!==this.props.orientation)&&this.scrollIframeToTop()}componentWillUnmount(){window.removeEventListener("resize",this.handleResizeDebouncedly)}render(){let e=ew[this.props.device][this.props.orientation],t=this.findTransformScale(),i=Math.round(e.height*t),s=this.findTopPosition(i),o=this.props.query?(0,ex.qC)(this.props.query):void 0,l=void 0===this.props.selectedItemId?o?`./embedded-preview?${o}`:"./embedded-preview":o?`./embedded-preview?item=${this.props.selectedItemId}&${o}`:`./embedded-preview?item=${this.props.selectedItemId}`;return(0,a.jsx)(n.Fragment,{children:(0,a.jsxs)("div",{ref:this.scaleWrapper,className:r().dynamic([["180a5b1f03827713",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,s,f.default.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" "+`scale-wrapper ${this.props.device} ${this.props.orientation}`,children:[(0,a.jsx)("div",{className:r().dynamic([["180a5b1f03827713",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,s,f.default.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" scaled",children:(0,a.jsx)("div",{ref:this.scaledPreview,className:r().dynamic([["180a5b1f03827713",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,s,f.default.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" center-horizontally scaled-preview",children:(0,a.jsxs)("div",{className:r().dynamic([["180a5b1f03827713",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,s,f.default.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" preview-container specified-dimensions",children:[(0,a.jsx)("img",{src:`${this.props.config.BASE_URL}/static/storymaps-website-common/images/device-preview/${e.fileName}`,alt:this.props.intl.formatMessage({id:"component.preview.chromeAlt"}),loading:"lazy",className:r().dynamic([["180a5b1f03827713",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,s,f.default.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" device-chrome"}),(0,a.jsx)("iframe",{src:l,ref:this.previewIframe,loading:"lazy",className:r().dynamic([["180a5b1f03827713",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,s,f.default.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])})]})})}),"desktop"!==this.props.device&&(0,a.jsx)("div",{className:r().dynamic([["180a5b1f03827713",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,s,f.default.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" rotate-button-wrapper center-horizontally",children:(0,a.jsx)(et.ZP,{type:"single-icon",iconSize:24,onClick:this.props.onOrientationChange,"aria-label":this.props.intl.formatMessage({id:"component.preview.rotateLabel"}),children:(0,a.jsx)(M.Z,{path:"M21.323 8.616l-4.94-4.94a1.251 1.251 0 0 0-1.767 0l-10.94 10.94a1.251 1.251 0 0 0 0 1.768l4.94 4.94a1.25 1.25 0 0 0 1.768 0l10.94-10.94a1.251 1.251 0 0 0 0-1.768zM14 5.707L19.293 11 11.5 18.793 6.207 13.5zm-4.323 14.91a.25.25 0 0 1-.354 0l-1.47-1.47.5-.5-2-2-.5.5-1.47-1.47a.25.25 0 0 1 0-.354L5.5 14.207l5.293 5.293zm10.94-10.94l-.617.616L14.707 5l.616-.616a.25.25 0 0 1 .354 0l4.94 4.94a.25.25 0 0 1 0 .353zm1.394 6.265V18a3.003 3.003 0 0 1-3 3h-3.292l1.635 1.634-.707.707-2.848-2.847 2.848-2.848.707.707L15.707 20h3.304a2.002 2.002 0 0 0 2-2v-2.058zM4 9H3V7a3.003 3.003 0 0 1 3-3h3.293L7.646 2.354l.707-.707 2.848 2.847L8.354 7.34l-.707-.707L9.28 5H6a2.002 2.002 0 0 0-2 2z"})})}),(0,a.jsx)(r(),{id:"180a5b1f03827713",dynamic:[this.props.websiteDesign.theme.colors.backgroundSecondary,t,s,f.default.spacing.lg,this.props.device,this.props.orientation,e.width,e.height],children:`.center-horizontally.__jsx-style-dynamic-selector{position:absolute;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%);top:0}.scale-wrapper.__jsx-style-dynamic-selector{height:100vh;position:relative;background-color:${this.props.websiteDesign.theme.colors.backgroundSecondary}}.scaled.__jsx-style-dynamic-selector{-webkit-transform:scale(${t});-moz-transform:scale(${t});-ms-transform:scale(${t});-o-transform:scale(${t});transform:scale(${t});position:relative;top:${s}px}.preview-container.__jsx-style-dynamic-selector{margin:0 auto}.rotate-button-wrapper.__jsx-style-dynamic-selector{top:auto;bottom:${f.default.spacing.lg}}iframe.__jsx-style-dynamic-selector{position:absolute;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.${this.props.device}.${this.props.orientation}.__jsx-style-dynamic-selector .specified-dimensions.__jsx-style-dynamic-selector{width:${e.width}px;height:${e.height}px}.phone.portrait.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{top:4.8%;left:1.9%;height:90.4%;width:96.3%}.phone.landscape.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{left:4.8%;top:1.9%;width:90.4%;height:96.3%}.tablet.portrait.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{top:4.6%;left:1.4%;height:90.6%;width:97.2%}.tablet.landscape.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{left:4.6%;top:1.4%;width:90.6%;height:97.2%}.desktop.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{top:6.4%;left:1.8%;width:96.5%;height:90.9%}`})]})})}scrollWindowToTop(){let e=window?.document?.documentElement;e&&(e.scrollTop=0)}scrollIframeToTop(){try{let e=this.previewIframe?.current?.contentWindow?.document?.documentElement;e&&this.scrollToTop(e)}catch(e){}}scrollToTop(e){if(e.scrollTop>0){let t=e.clientHeight?Math.round(e.clientHeight/2):300;setTimeout(()=>{e.scrollBy(0,-1*t),this.scrollToTop(e)},10)}}}var ev=(0,g.EL)((0,p.ZP)((0,j.Df)(eb))),eI=i(387651),eS=i(381e3),eT=i(392055),ek=i(416633),eA=i(657370),ej=i(92061),eD=i(841811),eC=i(548995),eP=i(531721);let e$="storyPreviewControlsNudge",e_="collectionPreviewControlsNudge";class eM extends n.Component{static #e=this.defaultProps={device:"fullscreen",onDeviceChange:()=>{}};constructor(e){super(e),this.deviceSpecs=[{value:"phone",iconProps:{path:eI.I},stringId:"component.previewHeader.device.phone",isUnavailable:this.props.storyItem.type===I.o.Briefing},{value:"tablet",iconProps:{path:"M15 14a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1zm-.25-10a.25.25 0 0 1 .25.25v8.5a.25.25 0 0 1-.25.25H14V4zM13 4v9H4V4zM1 9h1V8H1V4.25A.25.25 0 0 1 1.25 4H3v9H1.25a.25.25 0 0 1-.25-.25z",shouldFlipRTL:!0},stringId:"component.previewHeader.device.tablet",isUnavailable:this.props.storyItem.type===I.o.Briefing},{value:"desktop",iconProps:{path:eS.G},stringId:"component.previewHeader.device.desktop"},{value:"fullscreen",iconProps:{path:eT.m,shouldFlipRTL:!0},stringId:"component.previewHeader.device.full"}],this.renderControls=()=>{let e=this.props.intl.formatMessage({id:"component.preview.controls.close"});return(0,a.jsxs)("div",{className:r().dynamic([["b26b452fdfb19963",[$.ZP.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),$.ZP.shadow.md(),this.props.websiteDesign.theme.colors.surfaceDefault,this.props.websiteDesign.productVariables.borderRadius.mid]]])+" preview-controls",children:[this.deviceSpecs.map(e=>{if(e.isUnavailable)return;let t=e.value,i=this.props.intl.formatMessage({id:e.stringId});return(0,a.jsx)(ej.h,{"aria-pressed":this.props.device===t,iconProps:e.iconProps,buttonId:e.stringId,onClick:()=>{this.onPreviewChangeWrapper(t)},tooltipContent:i},`${t}-frag`)}),(0,a.jsx)(eD.Z,{}),(0,a.jsxs)(ek.u,{children:[(0,a.jsx)(eC.e,{routeDef:(0,H.kN)({route:"builder",itemId:this.props.storyItem.itemId,itemType:this.props.storyItem.type,isTemplate:this.props.storyItem.isTemplate}),children:(0,a.jsx)(ek.aJ,{children:(0,a.jsx)(et.ZP,{type:"single-icon",className:"edit-link","aria-label":e,children:(0,a.jsx)(M.Z,{path:P.n,size:16})})})}),(0,a.jsx)(ek._v,{children:e})]}),(0,a.jsx)(r(),{id:"b26b452fdfb19963",dynamic:[$.ZP.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),$.ZP.shadow.md(),this.props.websiteDesign.theme.colors.surfaceDefault,this.props.websiteDesign.productVariables.borderRadius.mid],children:`.preview-controls.__jsx-style-dynamic-selector{${$.ZP.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"})};${$.ZP.shadow.md()}
            background-color: ${this.props.websiteDesign.theme.colors.surfaceDefault};-webkit-border-radius:${this.props.websiteDesign.productVariables.borderRadius.mid};-moz-border-radius:${this.props.websiteDesign.productVariables.borderRadius.mid};border-radius:${this.props.websiteDesign.productVariables.borderRadius.mid};color:inherit}`})]})},this.onPreviewChangeWrapper=e=>{this.props.onDeviceChange&&this.props.onDeviceChange(e)},this.onNudgeDismissed=()=>{this.setState({hasSeenNudge:!0}),(0,eP.s)({id:this.props.storyItem.type===I.o.Story?e$:e_,value:!0})},this.state={hasSeenNudge:!!(0,eP.n)({id:this.props.storyItem.type===I.o.Story?e$:e_})}}render(){return(0,a.jsx)(eA.Z,{target:this.renderControls(),title:this.props.intl.formatMessage({id:"component.preview.controls.nudge.description"}),placement:"top",isShowing:!!this.props.canShowNudge&&!this.state.hasSeenNudge,onClick:this.onNudgeDismissed})}}var eL=(0,g.EL)((0,j.Df)((0,p.ZP)((0,Z.Jh)((0,J.D)(eM))))),eE=i(179463),ez=i(972054),eR=i(368667),eB=i(217115),eH=i(447878),eZ=i(863982),eO=i(457945);let eN=(e,t,i,s,a,o,r,n,l)=>JSON.stringify({"@context":"https://schema.org","@type":"NewsArticle",mainEntityOfPage:{"@type":"WebPage","@id":e},headline:`${o}`,image:[`${t}`],datePublished:`${i}`,dateModified:`${s}`,author:{"@type":"Person",name:`${a}`},publisher:{"@type":"Organization",name:"Esri",logo:{"@type":"ImageObject",url:`${n}${l.BASE_URL}/static/images/logo.png`}},description:`${r}`}),eU=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("link",{rel:"preconnect",href:"https://www.arcgis.com"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://js.arcgis.com"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://static.arcgis.com"})]});var eV=e=>{let{publishedDate:t,host:i,config:s,authorTrackingConfig:o}=e,r=(0,W.ZW)();if(r.type===I.o.Theme)throw Error("StoryItemMetaTags do not currently support theme items");let l=o&&(0,v.St)(o).isValidAnalyticsConfig,p=s.ESRI_MARKETING_ANALYTICS&&((r.itemDetails.typeKeywords??[]).includes(eZ.hH)||"string"==typeof r.itemDetails.orgId&&s.ESRI_MARKETING_ANALYTICS.orgIds.includes(r.itemDetails.orgId))?s.ESRI_MARKETING_ANALYTICS.scriptSrc:void 0,{requestNextRouteChangeWithFullPageLoad:d,getUrlFromRouteDef:c}=(0,H.Gr)();(0,n.useEffect)(()=>{(l||void 0!==p)&&d()},[l,p,d]);let h=(0,eE.Z)(!0),u=`${i?"https://"+i:(0,ez.o)({siteUrl:s.SITE_URL,isComponentMounted:h,isScriptEmbedded:s.IS_SCRIPT_EMBEDDED})}`,g=(0,eR.Sg)({portalHost:s.PORTAL_HOST,itemDetails:r.itemDetails,fallbackUrl:`${u}${(0,eO.Zr)(s.BASE_URL)}`,shouldIgnoreDPR:!0,returnOriginalAspectRatio:!0}),f=(0,A.G)(r.itemDetails),y=f?.metaProperties?.title?(0,ex.dW)(f?.metaProperties?.title):(0,ex.dW)(e.title),x=(0,ex.dW)(e.author),w=f?.metaProperties?.description?(0,ex.dW)(f?.metaProperties?.description):r.itemDetails.snippet?(0,ex.dW)(r.itemDetails.snippet):r.itemDetails.description?(0,ex.dW)(r.itemDetails.description):"",b=c((0,H.kN)({route:"viewer",itemType:r.type,itemId:r.itemDetails.id,isTemplate:r.isTemplate})),S=(0,eB._$)({typeKeywords:r.itemDetails.typeKeywords,typeKeywordId:eH.L7})||!(0,eR._$)({itemDetails:r.itemDetails,isTemplate:r.isTemplate});return(0,a.jsxs)(m(),{children:[(0,a.jsx)("title",{children:y},"title"),(0,a.jsx)("meta",{name:"author",content:x},"author"),(0,a.jsx)("meta",{property:"article:published_time",content:t.toISOString()},"publishedDate"),(0,a.jsx)("link",{rel:"canonical",href:b}),(0,a.jsx)("link",{rel:"alternate",type:"application/json+oembed",href:`${u}/oembed?url=${encodeURIComponent(b)}&format=json`,title:y}),(0,a.jsx)("link",{rel:"alternate",type:"text/xml+oembed",href:`${u}/oembed?url=${encodeURIComponent(b)}&format=xml`,title:y}),(0,a.jsx)(eU,{}),(void 0!==r.itemDetails.robots||S)&&(0,a.jsx)("meta",{name:"robots",content:S?"noindex, nofollow":"function"==typeof r.itemDetails.robots?.join?r.itemDetails.robots.join(","):"noindex, nofollow"}),(0,a.jsx)("meta",{property:"og:title",content:y},"og:title"),(0,a.jsx)("meta",{property:"og:description",content:w},"og:description"),(0,a.jsx)("meta",{property:"og:url",content:b},"og:url"),(0,a.jsx)("meta",{property:"og:image",content:g},"og:image"),(0,a.jsx)("meta",{name:"twitter:creator",content:x},"twitter:creator"),(0,a.jsx)("meta",{name:"twitter:url",content:b},"twitter:url"),(0,a.jsx)("meta",{name:"twitter:title",content:y},"twitter:title"),(0,a.jsx)("meta",{name:"twitter:description",content:w},"twitter:description"),(0,a.jsx)("meta",{name:"twitter:image",content:g},"twitter:image"),(0,a.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:`${eN(b,g,new Date(r.itemDetails.created).toISOString(),t.toISOString(),x,y,w,u,s)}`}}),p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("script",{dangerouslySetInnerHTML:{__html:`(function(){window.dataLayer = Object.assign({}, window.dataLayer, {pageTitle: 'StoryMap: ${r.itemDetails.owner}: ' + document.title, pageName: 'StoryMap: ' + document.title, pageType: 'StoryMaps', pageSubType: 'StoryMap', domain: window.location.host, language: 'en',countryCode: 'us'});})()`}}),(0,a.jsx)("script",{src:p,async:!0})]})]})},eF=i(948667),eW=i(321221);let eK=()=>{let{updateAppOffsetValues:e,top:t}=(0,Z.YO)();return(0,n.useEffect)(()=>{t!==eW.gz&&e({top:{storyHeader:(0,ex.wA)(eW.gz)}})},[]),null},eq=e=>{let{shouldShowHeader:t,children:i}=e,{hasSpaceForHeader:s,toggleHeaderSpace:o}=(0,el.r)();return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(eK,{}),(0,a.jsx)(G.Z,{triggerKey:"\\",isMeta:!0,on:o}),s&&i]})};var eG=i(108624),eY=i(504908),eX=i(185843),eJ=e=>(0,a.jsx)(et.ZP,{type:"secondary",className:e.className,onClick:()=>window.history.back(),children:(0,a.jsx)(l.Z,{id:"page.error.back"})});class eQ extends n.PureComponent{render(){return(0,a.jsx)(et.ZP,{className:this.props.className,onClick:this.print,children:(0,a.jsx)(l.Z,{id:"common.print"})})}constructor(...e){super(...e),this.print=()=>{S.Z.trackEvent(S.Z.Category.Viewer,S.Z.Action.Viewer_Print),window.print()}}}var e0=()=>{let e={styles:(0,a.jsx)(r(),{id:"ff2bbe251c0e47dd",dynamic:[f.default.spacing.xs],children:`.side-margins.__jsx-style-dynamic-selector{margin:0 ${f.default.spacing.xs}}`}),className:r().dynamic([["ff2bbe251c0e47dd",[f.default.spacing.xs]]])};return(0,a.jsxs)("div",{className:r().dynamic([["9c8ebce0cb77e47d",[f.default.spacing.lg,f.default.spacing.xs,y.Kk.RTL]]])+" basic-wrapper",children:[(0,a.jsxs)("div",{className:r().dynamic([["9c8ebce0cb77e47d",[f.default.spacing.lg,f.default.spacing.xs,y.Kk.RTL]]])+" print-wrapper",children:[(0,a.jsx)(eQ,{className:`side-margins ${e.className}`}),(0,a.jsx)(eJ,{className:`side-margins ${e.className}`})]}),(0,a.jsx)(r(),{id:"9c8ebce0cb77e47d",dynamic:[f.default.spacing.lg,f.default.spacing.xs,y.Kk.RTL],children:`.basic-wrapper.__jsx-style-dynamic-selector{position:relative;display:none}@media screen{.basic-wrapper.__jsx-style-dynamic-selector{display:block}}.print-wrapper.__jsx-style-dynamic-selector{position:absolute;top:${f.default.spacing.lg};left:100%;display:grid;grid-gap:${f.default.spacing.xs}}${y.Kk.RTL} .print-wrapper.__jsx-style-dynamic-selector{left:unset;right:100%}`}),e.styles]})},e1=e=>{let{isScriptEmbed:t}=e,{vertical:i}=(0,Z.YO)(),{theme:s}=(0,g.Fj)(),o=c()("viewer-main",eZ.MH,e.mainClassName,{"device-preview":"preview"===e.mode});return(0,a.jsxs)(eX.Z,{className:c()({"inline-story":e.isInlineStory}),children:[e.viewerHeader,e.printMode&&(0,a.jsx)(e0,{}),(0,a.jsx)(t?"div":"main",{className:r().dynamic([["8130e9d918a1c8ae",[f.default.print.pageWidthLetter,f.default.print.backgroundColor]],["d063f484d88fd766",[i,s.colors.focus,i]]])+" "+(o||""),children:e.children}),(0,a.jsx)(r(),{id:"d063f484d88fd766",dynamic:[i,s.colors.focus,i],children:`.viewer-main.__jsx-style-dynamic-selector{min-height:-webkit-calc(100vh - ${i});min-height:-moz-calc(100vh - ${i});min-height:calc(100vh - ${i})}.viewer-main.device-preview.__jsx-style-dynamic-selector{min-height:0}*:focus{outline-color:${s.colors.focus}}body.print .viewer-main.__jsx-style-dynamic-selector{min-height:0}@supports(height:1svh){.viewer-main.__jsx-style-dynamic-selector{min-height:-webkit-calc(100svh - ${i});min-height:-moz-calc(100svh - ${i});min-height:calc(100svh - ${i})}}`}),(0,a.jsx)(r(),{id:"8130e9d918a1c8ae",dynamic:[f.default.print.pageWidthLetter,f.default.print.backgroundColor],children:`body.print{width:${f.default.print.pageWidthLetter};margin:0 auto}body.print .page-container{background:${f.default.print.backgroundColor}}`})]})},e2=i(49969);class e5 extends n.PureComponent{constructor(e){super(e),this.setAuthorTrackerFromConfig=()=>{this.trackingDetails=this.getAuthorTrackerDetails(),this.trackingType=this.trackingDetails?.type;let e=(0,v.St)(this.trackingDetails);if(void 0!==this.trackingDetails&&!this.state.hasActiveAuthorTracker&&e.isValidAnalyticsConfig){v.YX.setup({portal:this.props.portalSelfResponse,isPortal:this.props.isPortal,authorTrackingConfig:this.trackingDetails});try{v.YX.instance.startupTracker(),this.setState({hasActiveAuthorTracker:!0})}catch(e){this.setState({hasActiveAuthorTracker:!1}),console.error("Error starting author tracker",e)}}},this.handleEmbeddedCollectionUpdate=e=>{let{currentIndex:t,isItemViewTransitionComplete:i,isCoverShowing:s}=e.detail;this.props.collectionDisplay.updateCollectionDisplay({currentIndex:t,isItemViewTransitionComplete:i,isCoverShowing:s})},this.getItemViewerHeader=()=>{let e=this.props.storyItem.getItemPublishStatus(),t=this.props.storyItem.itemSharingLevel,i=this.props.storyItem.itemDetails&&"embedded-preview"!==this.props.mode&&"preview"!==this.props.mode&&!this.props.storyItem.itemDetails.origin&&("admin"===this.props.storyItem.itemDetails.itemControl||"update"===this.props.storyItem.itemDetails.itemControl),s={...this.props,storyId:this.props.storyItem.itemId,title:this.state.title,isOrgItem:this.props.storyItem.isOrgItem,itemOwner:this.props.storyItem.itemOwner,storyType:this.props.itemType,publishStatus:e,sharingLevel:t,canEdit:i,areSocialIconsHidden:this.state.areSocialIconsHidden,appLogo:this.props.appLogo,shouldShowSkipLink:!0,hashForSkipLink:this.state.hashForSkipLink,shouldShowLogoInHeader:this.props.storyContext.storyLogo?.shouldShowLogoInHeader??!0};switch(this.props.itemType){case I.o.Story:return(0,a.jsx)(eF.Z,{...s,canShowItemTitle:this.props.canShowItemTitle,onTitleClicked:this.resetItemBlock});case I.o.Collection:return(0,a.jsx)(ef.Z,{...s,canShowItemTitle:this.props.canShowItemTitle,getItemHref:this.getItemHref});case I.o.Briefing:return(0,a.jsx)(eu.Z,{...s,onTitleClicked:this.resetItemBlock,shouldDisablePresentationModeUI:this.getIsEmbeddedPreview()});case I.o.Frame:return(0,a.jsx)(a.Fragment,{});default:throw Error("No story item type provided")}},this.getBannerStringId=()=>this.props.itemType===I.o.Frame?"frames.preview.banner":"common.banner.viewDraftStory.mobile",this.getItemHref=e=>this.itemBlock?.do("getItemUrl",e),this.renderBanner=e=>(0,a.jsxs)(n.Fragment,{children:["fullscreen-preview"===e&&(!this.props.isViewportMinWidth("large")||this.props.itemType===I.o.Frame)&&(0,a.jsx)("div",{className:r().dynamic([["3f0395a02f103140",[this.props.appOffset.top]]])+" draft-preview-banner",children:(0,a.jsx)(u.Z,{size:"small",title:(0,a.jsx)(l.Z,{id:this.getBannerStringId()}),backgroundColor:this.props.websiteDesign.theme.colors.interactiveDefault,textColor:this.props.websiteDesign.theme.colors.labelPrimaryReverse,closeBtnColor:this.props.websiteDesign.theme.colors.labelPrimaryReverse,closeButtonLabel:this.props.intl.formatMessage({id:"common.close"})})}),(0,a.jsx)(r(),{id:"3f0395a02f103140",dynamic:[this.props.appOffset.top],children:`.draft-preview-banner.__jsx-style-dynamic-selector{position:absolute;top:${this.props.appOffset.top};left:0;width:100%;z-index:1}body.print .draft-preview-banner.__jsx-style-dynamic-selector{display:none}body.frame{-webkit-touch-callout:none;-webkit-user-select:none}`})]}),this.renderBody=e=>"preview"===e&&"fullscreen"!==this.state.previewDevice?(0,a.jsx)(ev,{device:this.state.previewDevice,orientation:this.state.previewOrientation,onOrientationChange:this.onOrientationChange,query:this.props.query,...this.props.itemType===I.o.Collection&&{selectedItemId:(this.state.collectionItemIndex+1).toString()}}):(0,a.jsxs)(a.Fragment,{children:[this.state.ui,this.renderBanner(e)]}),this.onOrientationChange=()=>{let e="landscape"===this.state.previewOrientation?"portrait":"landscape";this.setState({previewOrientation:e})},this.onPreviewDeviceChange=e=>{if(e){let t={previewDevice:e};"phone"===e?(Object.assign(t,{previewOrientation:"portrait"}),S.Z.trackEvent(S.Z.Category.Preview,S.Z.Action.Preview_Device_Phone)):"tablet"===e&&(Object.assign(t,{previewOrientation:"landscape"}),S.Z.trackEvent(S.Z.Category.Preview,S.Z.Action.Preview_Device_Tablet)),this.setState(t,()=>{this.props.onPreviewDeviceChange?.(e)})}},this.resetItemBlock=()=>{this.itemBlock?.do("reset")},this.getAuthorTrackerDetails=()=>{let e=!this.props.environment.isPortal||this.props.featureDecisions.canHaveAuthorAnalytics,t=(0,eG.C5)(this.props.storyItem,e,this.props.printMode);if("view"===this.props.mode&&t&&(!t||!t.consentMessage||this.state.hasUserAcceptedAuthorAnalytics))return t},this.onAuthorAnalyticsConsentMessageAccepted=()=>{this.setState({isAuthorAnalyticsConsentMessageShowing:!1,hasUserAcceptedAuthorAnalytics:!0},()=>{this.setAuthorTrackerFromConfig()})},this.onAuthorAnalyticsConsentMessageDismissed=()=>{this.setState({isAuthorAnalyticsConsentMessageShowing:!1})},this.jumpToBlock=()=>{let e=this.props.itemType===I.o.Briefing?0:100,t=0,i=0,s=document.body.offsetHeight,a=setInterval(async()=>{i++;let e=document.body.offsetHeight;e===s?t++:(s=e,t=0),(t>=30||i>=100)&&(clearInterval(a),(0,eG.G1)(),this.state.linkedBlockId&&await this.itemBlock?.do("jumpToBlock",this.state.linkedBlockId))},e)},this.getHasDocumentLoaded=()=>"undefined"!=typeof document&&"complete"===document.readyState,this.onWindowLoaded=()=>{this.setState({hasPageLoaded:!0}),this.state.linkedBlockId&&this.state.hasItemRendered&&this.jumpToBlock()},this.getIsEmbeddedPreview=()=>(0,T.xR)()&&"embedded-preview"===this.props.mode,this.getBylineFromStoryItemData=(e,t,i)=>{if(t===I.o.Story){let t=e.nodes[e.root];if(!t.children)return"";for(let i of t.children){let t=e.nodes[i];if(t&&"storycover"===t.type)return t.data?.byline}}else if(t===I.o.Collection){for(let t of Object.values(e.nodes))if(t&&"collection-cover"===t.type)return t.data?.byline}else if(t===I.o.Frame)return i||"";else if(t===I.o.Briefing){for(let t of Object.values(e.nodes))if(t&&"storycover"===t.type)return t.data?.byline}else throw Error("only call getBylineFromStoryItemData for gemini items");return""},this.state={ui:void 0,viewerHeaderTheme:this.props.itemType===I.o.Briefing?"dark":"light",title:this.props.storyItem.itemDetails?.title||"",areSocialIconsHidden:!1,previewDevice:"fullscreen",previewOrientation:"landscape",isMounted:!1,isAuthorAnalyticsConsentMessageShowing:!1,hasUserAcceptedAuthorAnalytics:!1,hasActiveAuthorTracker:!1,hasPageLoaded:this.getHasDocumentLoaded(),linkedBlockId:this.props.canJumpToLinkedBlock&&!this.props.printMode?(0,eG.g2)():void 0,hasItemRendered:!1,collectionItemIndex:this.props.initialCollectionItemIndex??-1}}componentDidMount(){(0,e2.u)(this),this.setState({isMounted:!0}),this.state.linkedBlockId&&(this.getHasDocumentLoaded()?this.onWindowLoaded():window.addEventListener("load",this.onWindowLoaded)),this.props.itemType===I.o.Collection&&document.addEventListener("embeddedCollectionUpdate",this.handleEmbeddedCollectionUpdate);let e="view"===this.props.mode?this.props.storyItem.itemData:this.props.storyItem.itemDraftData,t={shouldHideItemActions:this.props.storyItem.itemId===eY.BD||this.props.shouldHideItemActions||!!this.props.printMode||"view"!==this.props.mode,printMode:this.props.printMode,viewMode:this.props.mode,lazy:!this.props.printMode,storyItem:this.props.storyItem,config:this.props.config,featureDecisions:this.props.featureDecisions,environment:this.props.environment,toast:this.props.toast,portalSelfResponse:this.props.portalSelfResponse,authManager:this.props.authManager,getIntl:()=>this.props.intl,getAppOffset:()=>this.props.appOffset,getStoryOffset:()=>this.props.storyOffsetContext,getStoryDesignContext:()=>this.props.storyDesign,getStoryRouting:()=>this.props.storyRouting,getStoryContext:()=>this.props.storyContext,root:{initialThemeItemInfo:this.props.initialThemeItemInfo},scriptEmbedConfig:this.props.scriptEmbedConfig,canCopyLinks:!this.props.isInlineStory&&!(0,T.XU)(),...this.props.itemType===I.o.Collection&&{lazy:!1,getCollectionContextDisplay:()=>this.props.collectionDisplay,getCollectionContextData:()=>this.props.collectionData,isShowingCollectionItem:!this.props.collectionDisplay.isCoverShowing}};window.location.search.includes("lazy=false")&&Object.assign(t,{lazy:!1}),Object.assign(t,{lab:this.props.config.ENABLE_LAB_FEATURES&&(0,k.Sf)(window.location.href)}),document&&document.body&&this.props.printMode&&document.body.classList.add("print",this.props.printMode),document&&document.body&&this.props.itemType===I.o.Frame&&document.body.classList.add("frame"),(0,C.J_)({data:e,mode:"viewer",context:{...t},registry:(0,B.J)({featureDecisions:this.props.featureDecisions,includeLabItems:!!t.lab})}).then(e=>{this.itemBlock=e;let t=this.itemBlock.do("getStoryTheme");return this.setState({viewerHeaderTheme:this.props.itemType===I.o.Briefing?"dark":t.websiteThemeFlavor,title:this.itemBlock.do("getCoverTitle"),areSocialIconsHidden:this.itemBlock.do("isSocialIconsHidden"),coverData:this.itemBlock.do("getCoverData"),hashForSkipLink:this.itemBlock.do("getSkipLinkHash")}),this.itemBlock.render()}).then(e=>{this.setAuthorTrackerFromConfig(),this.setState({ui:e,hasItemRendered:!0,isAuthorAnalyticsConsentMessageShowing:"view"===this.props.mode&&!this.props.printMode&&!!this.itemBlock?.do("getAuthorAnalytics")&&!!(this.itemBlock?.do("getAuthorAnalytics")).consentMessage}),this.state.linkedBlockId&&this.state.hasPageLoaded&&this.jumpToBlock()}).then(()=>{if("view"===this.props.mode&&this.props.storyItem.itemId!==eY.BD)try{(0,O.Az)({itemId:this.props.storyItem.itemId,portalHost:this.props.config.PORTAL_HOST,authManager:this.props.authManager,customTracker:this.props.itemViewTracker})}catch(e){}}).catch(e=>{S.Z.trackEvent(S.Z.Category.Viewer,S.Z.Action.Story_Render_Error,this.props.storyItem.itemId),this.props.redirectOnLoadError?.({config:this.props.config,signInUrl:this.props.signInUrl,authManager:this.props.authManager})})}componentDidUpdate(e){if(this.props.itemType===I.o.Collection){let{currentIndex:t,isCoverShowing:i,isItemViewTransitionComplete:s}=e.collectionDisplay,{currentIndex:a,isCoverShowing:o,isItemViewTransitionComplete:r}=this.props.collectionDisplay,n=i!==o||t!==a,l=n||s!==r;if(this.getIsEmbeddedPreview()&&l){let e=new CustomEvent("embeddedCollectionUpdate",{detail:{currentIndex:a,isItemViewTransitionComplete:r,isCoverShowing:o}});try{window.parent?.document.dispatchEvent(e)}catch{}return}if(n){let e=this.props.storyItem.itemDetails.id,t=`${this.props.config.BASE_URL}/collections/${e}`;if("preview"===this.props.mode&&(t=`${t}/preview`),!o){let e=new URLSearchParams(window.location.search);e.set("item",`${a+1}`),t=`${t}?${e}`}window.history.replaceState(null,"",t)}if("fullscreen"!==this.state.previewDevice)return;let p=o?-1:a;this.state.collectionItemIndex!==p&&this.setState({collectionItemIndex:p})}}componentWillUnmount(){this.setState({isMounted:!1}),window.removeEventListener("load",this.onWindowLoaded),document.removeEventListener("embeddedCollectionUpdate",this.handleEmbeddedCollectionUpdate)}render(){let e=this.itemBlock?.do("getMetaSettings"),t=(0,eG.RC)({itemType:this.props.itemType,isTemplate:this.props.storyItem.isTemplate,title:e?.title??this.state.title,formatMessage:this.props.intl.formatMessage}),i=this.props.mode;"preview"!==this.props.mode||"fullscreen"!==this.state.previewDevice&&this.props.isViewportMinWidth("large")||(i="fullscreen-preview");let s=!this.props.printMode&&("preview"===this.props.mode||"fullscreen-preview"===this.props.mode&&this.props.isViewportMinWidth("large")),o=this.props.shouldShowViewerHeader&&("preview"!==this.props.mode||"preview"===this.props.mode&&"fullscreen"===this.state.previewDevice),l=null;if(o){let e=this.getItemViewerHeader();l=(0,a.jsx)(g.tT,{defaultTheme:this.state.viewerHeaderTheme,isStoryThemeDependent:!0,children:this.props.itemType===I.o.Briefing?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eq,{shouldShowHeader:!0,children:e}),this.props.isViewportMinWidth("medium")&&(0,a.jsx)(em,{})]}):e})}let p=(0,A.G)(this.props.storyItem.itemDetails),d=p?.metaProperties?.description||this.props.storyItem.itemDetails.snippet,h={styles:(0,a.jsx)(r(),{id:"de66ee6ec6ca8409",dynamic:[this.props.websiteDesign.theme.colors.backgroundPrimary],children:`.briefing-viewer-main.__jsx-style-dynamic-selector{background-color:${this.props.websiteDesign.theme.colors.backgroundPrimary}}`}),className:r().dynamic([["de66ee6ec6ca8409",[this.props.websiteDesign.theme.colors.backgroundPrimary]]])},u=this.props.itemType===I.o.Story||this.props.itemType===I.o.Briefing||this.props.itemType===I.o.Frame,x=this.state.hasItemRendered&&!this.props.printMode&&this.props.postStoryContent;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(eg.Z,{children:t}),d&&(0,a.jsx)(m(),{children:(0,a.jsx)("meta",{name:"description",content:d,className:r().dynamic([["3c1a008856ddbf45",[this.props.appOffset.bottom,f.default.spacing.md,f.default.spacing.custom("7.2rem"),y.Kk.RTL,f.default.spacing.custom("7.2rem")]]])},"description")}),u&&(0,a.jsx)(z.Z,{}),(0,a.jsx)(W.ZP.Provider,{value:this.props.storyItem,children:(0,a.jsx)(q.UV,{initialQuery:this.props.query,children:(0,a.jsx)(V.dX,{children:(0,a.jsxs)(U.H9,{children:[this.props.storyItem.itemDetails&&this.props.storyItem&&this.props.storyItem.itemData&&this.props.storyItem.getItemPublishDate()&&(0,a.jsx)(eV,{title:t,author:this.getBylineFromStoryItemData(this.props.storyItem.itemData,this.props.itemType,this.props.itemOwnerFullName),publishedDate:this.props.storyItem.getItemPublishDate(),host:this.props.host,config:this.props.config,authorTrackingConfig:this.getAuthorTrackerDetails()}),this.state.isAuthorAnalyticsConsentMessageShowing&&(0,a.jsx)(E,{onAllowClicked:this.onAuthorAnalyticsConsentMessageAccepted,onDismissClicked:this.onAuthorAnalyticsConsentMessageDismissed,message:this.itemBlock?.do("getAuthorAnalytics")?.consentMessage??""}),(0,a.jsxs)(e1,{...this.props,viewerHeader:l,mode:i,printMode:this.props.printMode,isInlineStory:this.props.isInlineStory,isScriptEmbed:this.props.isScriptEmbed,mainClassName:this.props.itemType===I.o.Briefing?c()(h.className,"briefing-viewer-main"):void 0,children:[(0,a.jsx)(en,{onItemEndReached:this.resetItemBlock,collectionBlock:this.props.itemType===I.o.Collection?this.itemBlock:void 0}),s&&this.props.isViewportMinWidth("large")&&this.state.isMounted&&this.props.itemType!==I.o.Frame&&(0,a.jsx)("div",{className:r().dynamic([["3c1a008856ddbf45",[this.props.appOffset.bottom,f.default.spacing.md,f.default.spacing.custom("7.2rem"),y.Kk.RTL,f.default.spacing.custom("7.2rem")]]])+" preview-controls-container",children:(0,a.jsx)(g.tT,{defaultTheme:"light",children:(0,a.jsx)(eL,{onDeviceChange:this.onPreviewDeviceChange,device:this.state.previewDevice,canShowNudge:this.props.canShowPreviewControlsNudge})})}),this.renderBody(i),this.props.footerBanner,x&&(0,a.jsx)(g.tT,{defaultTheme:this.state.viewerHeaderTheme,isStoryThemeDependent:!0,children:this.props.postStoryContent})]})]})})})}),(0,a.jsx)(r(),{id:"3c1a008856ddbf45",dynamic:[this.props.appOffset.bottom,f.default.spacing.md,f.default.spacing.custom("7.2rem"),y.Kk.RTL,f.default.spacing.custom("7.2rem")],children:`.preview-controls-container.__jsx-style-dynamic-selector{position:fixed;z-index:98;bottom:-webkit-calc(${this.props.appOffset.bottom} + ${f.default.spacing.md});bottom:-moz-calc(${this.props.appOffset.bottom} + ${f.default.spacing.md});bottom:calc(${this.props.appOffset.bottom} + ${f.default.spacing.md});right:${f.default.spacing.custom("7.2rem")}}${y.Kk.RTL} .preview-controls-container.__jsx-style-dynamic-selector{right:unset;left:${f.default.spacing.custom("7.2rem")}}`}),this.props.itemType===I.o.Briefing&&h.styles]})}}var e3=(0,R.Fv)((0,g.EL)((0,j.Df)((0,p.ZP)((0,H.Jy)((0,K.F)((0,D.oh)((0,Z.Jh)((0,x.d2)((0,w.ZP)((0,b.VO)((0,F.w)((0,N.p)(e5)))))))))))))},504908:function(e,t,i){i.d(t,{BD:function(){return r},kS:function(){return p},nt:function(){return a}});var s,a,o=i(447878);let r="sample32charactersvaliditemidaaa",n=e=>{let t=Date.now();return{id:r,owner:"StoryMaps Team",created:t,modified:t,title:e?.({id:"component.themeEditor.storyHeaderText"})??"",type:o.Cs,typeKeywords:["arcgis-storymaps",`smdraftresourceid:${o.AY}0.json`,`smpublisheddate:${t}`,"smstatuspublished","smversiondraft:20.27.0","smversionpublished:20.27.0","StoryMap","Web Application"],tags:[""],numViews:0,size:0}},l=e=>{let{formatMessage:t,baseUrl:i,siteUrl:s,productName:a,baseThemeId:o}=e,r=e=>{let[i]=e;return t?.({id:`component.themePreviewSampleStory.${i}`})??""};return{root:"n-lMEvw3",nodes:{"n-ZEqBEg":{type:"storycover",data:{type:"minimal",title:r`storycover.title`,summary:r`storycover.summary`,byline:a,titlePanelHorizontalPosition:"start"}},"n-YKldSA":{type:"navigation",data:{links:[{nodeId:"n-VMrERe"}]},config:{isHidden:!0}},"n-EDAcop":{type:"text",data:{text:r`text1`,type:"paragraph"}},"n-erhBAh":{type:"text",data:{text:r`text2`,type:"paragraph"}},"n-PHc2cM":{type:"button",data:{text:r`button.text`,link:""}},"n-VMrERe":{type:"text",data:{type:"h2",text:r`text3`}},"n-lfXBaT":{type:"text",data:{text:r`text4`,type:"paragraph"}},"n-links":{type:"text",data:{text:r`link`,type:"paragraph"}},"n-vbQaVc":{type:"text",data:{text:r`text5`,type:"quote",attribution:r`text5a`}},"n-Y2phK6":{type:"text",data:{text:r`text6`,type:"h3"}},"n-CKO4Ak":{type:"text",data:{text:r`text7`,type:"paragraph"}},"n-expressmap":{type:"expressmap",data:{map:"r-expressmap",alt:"",caption:r`expressmap.caption`},config:{size:"standard"}},"n-6bhWAJ":{type:"text",data:{type:"paragraph",text:r`text8`}},"n-4Dsx7p":{type:"separator"},"n-EcdqDK":{type:"audio",data:{audio:"r-j7OSzQ",caption:r`audio.caption`}},"n-7KLTO8":{type:"text",data:{text:r`text9`,type:"paragraph"}},"n-r7trnc":{type:"embed",data:{url:s+i,embedType:"link",title:a,description:t?.({id:"page.index.subtitle"})??"",thumbnailUrl:`${i}/static/images/social-sharing-card.jpeg?v=22.15`,providerUrl:s,caption:a,display:"card"}},"n-8CSjqa":{type:"text",data:{text:r`text10`,type:"h4"}},"n-1GjFLq":{type:"text",data:{text:r`text11`,type:"paragraph"}},"n-80Orlw":{type:"attribution",data:{content:r`attribution.content`,attribution:r`attribution.attribution`}},"n-TiLsTS":{type:"credits",children:["n-8CSjqa","n-1GjFLq","n-80Orlw"]},"n-lMEvw3":{type:"story",data:{storyTheme:"r-82O3KC"},children:["n-ZEqBEg","n-YKldSA","n-EDAcop","n-erhBAh","n-PHc2cM","n-VMrERe","n-lfXBaT","n-links","n-vbQaVc","n-Y2phK6","n-CKO4Ak","n-expressmap","n-4Dsx7p","n-6bhWAJ","n-EcdqDK","n-7KLTO8","n-r7trnc","n-TiLsTS"]}},resources:{"r-expressmap":{type:"expressmap",data:{src:`${i}/static/storymaps-builder/expressmaps/theme_preview_sample_expressmap.json`,provider:"uri"}},"r-j7OSzQ":{type:"audio",data:{src:`${i}/static/storymaps-builder/audio/theme_preview_sample_audio.wav`,provider:"uri"}},"r-82O3KC":{type:"story-theme",data:{themeId:o,themeBaseVariableOverrides:{}}}}}};(s=a||(a={})).AUDIO="n-EcdqDK",s.BUTTON="n-PHc2cM",s.SEPARATOR="n-4Dsx7p",s.STORYCOVER="n-ZEqBEg",s.QUOTE="n-vbQaVc",s.LINK="n-links",s.EXPRESSMAP="n-expressmap";let p=e=>({id:r,draftData:l(e),itemDetails:n(e.formatMessage)})},23027:function(e,t,i){i.d(t,{C:function(){return o},G:function(){return a}});var s=i(202784);let a=(0,s.createContext)({briefingDisplay:{currentIndex:0,totalNumberOfSlides:0,isStoryItemOutlineShowing:!1},updateBriefingDisplay:()=>{},setOnUpdateCurrentlyIndex:()=>null}),o=()=>(0,s.useContext)(a)},298382:function(e,t,i){i.d(t,{W:function(){return s}});let s=(0,i(202784).createContext)({collectionData:{titlesArray:[],updateCollectionData:()=>{}},collectionDisplay:{currentIndex:-1,isCoverShowing:!0,isItemViewTransitionComplete:!1,updateCollectionDisplay:()=>{}}})},56867:function(e,t,i){i.d(t,{Od:function(){return o}}),i(552322);var s=i(202784);let a=(0,s.createContext)({translateContentIntoLocale:()=>void 0,submitTranslationFeedback:()=>void 0,allSupportedLanguages:[]}),o=()=>(0,s.useContext)(a)},544213:function(e,t,i){i.d(t,{Gt:function(){return r},dX:function(){return n},uH:function(){return l}});var s=i(552322),a=i(202784);let o=(0,a.createContext)({isExpanded:!1,updateIsExpanded:()=>void 0}),r=()=>(0,a.useContext)(o),n=e=>{let{children:t}=e,[i,r]=(0,a.useState)({}),n=(0,a.useCallback)((e,t)=>{if(e&&!i[t])r({...i,[t]:!0});else if(!e&&i[t]){let e={...i};delete e[t],r(e)}},[i]),l=(0,a.useMemo)(()=>({isExpanded:!!Object.values(i).length,updateIsExpanded:n}),[i,n]);return(0,s.jsx)(o.Provider,{value:l,children:t})},l=e=>class extends a.PureComponent{render(){return(0,s.jsx)(o.Consumer,{children:t=>(0,s.jsx)(e,{...this.props,mediaExpandedContext:t})})}}},969124:function(e,t,i){i.d(t,{B:function(){return s}});let s=(0,i(202784).createContext)({updateStoryOffsetContext:()=>{},storyOffset:{navBarHeight:"0rem"}})},614549:function(e,t,i){i.d(t,{Db:function(){return u},Mq:function(){return h},NH:function(){return m},Yx:function(){return f},kE:function(){return g},kz:function(){return c}});var s=i(552322),a=i(202784),o=i(69378),r=i(355125),n=i(81052),l=i(850358),p=i(580279),d=i(56867);let c=e=>e.nodes[e.root]?.config?.storyLocale,h=async e=>{{let{setLocale:t}=await Promise.all([i.e(72325),i.e(21154),i.e(36234),i.e(54380),i.e(4516)]).then(i.bind(i,504516));t(e??window.document.documentElement.lang??"en")}},m=async(e,t)=>{let i=t||window?.document?.documentElement?.lang||"en-us",s=`${(0,n.Zl)(e)}/portals/regions?f=json&culture=${i}`;return await (0,o.WY)(s,{httpMethod:"GET"})},u=e=>e.map((e,t)=>({id:t,labelId:"",label:e.localizedName,searchModifier:"",iSearchOptions:{categories:`/Region/${e.region}`}})),g=e=>{let{authManager:t}=(0,r.Pc)(),i=(0,l.ZR)(),{allSupportedLanguages:s}=(0,d.Od)(),[o,c]=(0,a.useState)(),h=(0,n.Zl)(i.PORTAL_HOST,t),m=(0,a.useMemo)(()=>{let t=e?.supportedLocales?.map(e=>p.dA(e,s))??[];return new Set(t)},[e?.supportedLocales,s]);return(0,a.useEffect)(()=>{(async()=>{if(h)try{let e=await (0,p.hN)(h);c(e)}catch(e){console.error(e)}})()},[h]),(0,a.useMemo)(()=>o?m.size?o.filter(e=>{let t=(0,p.dA)(e.culture,s);return m.has(t)}):o:void 0,[o,m,s])},f=(e,t)=>i=>{let a=g(t);return(0,s.jsx)(e,{portalLanguages:a,...i})}},949843:function(e,t,i){i.d(t,{tz:function(){return M},A5:function(){return $}});var s=i(612423),a=i(718895),o=i(752179),r=i(614549),n=i(163891),l=i(307411),p=i(567523),d=i(504908),c=i(140995),h=i(936190),m=i(457945),u=i(522532),g=i(902183),f=i(293786),y=i(69378),x=i(641391),w=i(136630);let b=async(e,t,i)=>{let s;let a=e=>{},o=await (0,w.Up)(e,{maxRetries:1,promiseArguments:e=>t(a(e)),onError:e=>{console.error({err:e,debugInfo:i});let t=[x._n.APP_BLOCKED_FOR_ORG,x._n.ITEM_ACCESS_UNAUTHORIZED,x._n.ITEM_NONEXISTENT_OR_INACCESSIBLE,x._n.SUBSCRIPTION_DISABLED,x._n.OWNER_SUBSCRIPTION_DISABLED,x._n.SUBSCRIPTION_CANCELED,x._n.INVALID_TOKEN,"HTTP 403"];return!(e instanceof Error&&(e instanceof y.yE&&t.includes(e.code)||"string"==typeof e.message&&/items\/[a-zA-Z0-9]{32}\/data/.test(e.message)&&"invalid-json"===e.type))}});return clearTimeout(s),o};var v=i(580279),I=i(820666),S=i(217115),T=i(368667),k=i(972054),A=i(904845),j=i(518273),D=i(387703);let C=e=>void 0===e?void 0:e.req?.url?e.req.url:"pathname"in e?e.asPath??`${e.pathname}${(0,u.F5)(e.query)}`:void 0,P=e=>{let{itemDetails:t,expectedItemType:i,url:o}=e,r=(0,g.qg)(t),n=o&&o.includes("/templates")&&o.includes(t.id);if(!(0,s.mT)(t,i)||r&&!n||!r&&n){let e=(0,g.HL)(t);throw new a.Z({type:"item-not-supported-on-route",itemType:e})}},$=async e=>{let{id:t,authManager:i,config:s,ctx:a,itemType:p,translationOptions:d,shouldRedirect:c}=e;if(p===f.o.Frame){if(!s.ENABLE_FRAMES)return{redirect:{asPath:`${s.BASE_URL}/error`},success:!1};if(a?.req?.url?.includes("test"))return E(s,t)}if(!t)throw Error(`no ${p} id`);if(void 0!==a){let{res:e}=a;e?.setHeader?.("Vary","Cookie")}let h={itemId:t,authManager:i,portalHost:s.PORTAL_HOST},m=!1,u={...h,type:p,config:s};try{let[f,y]=await Promise.all([b(o.Z.fetchItemDetails,e=>[{...h,signal:e}],{function:"StoryItemViewer.fetchItemDetails",id:t,itemType:p}),b(o.Z.fetchPublishedItemData,e=>[{...u,signal:e}],{function:"StoryItemViewer.fetchPublishedItemData",id:t,itemType:p})]);m=(0,g.qg)(f),P({itemDetails:f,expectedItemType:p,url:C(a)});let x=(0,r.kz)(y),w=d?.locale?(0,v.dA)(d.locale,d.supportedLanguages,d.fallbackLanguage):void 0;w&&I.G(f)?.translations?.[w]&&d?.autoTranslationTypeKeyword&&(0,S._$)({typeKeywords:f.typeKeywords,typeKeywordId:d.autoTranslationTypeKeyword})?(x=x?d.locale:void 0,y=await b(o.Z.fetchPublishedItemData,e=>[{...u,language:w,signal:e}],{function:"fetchPublishedItemData",id:t,itemType:p})):w&&d?.locale&&x?.startsWith(w)&&(x=d.locale);let k=await b(n.ir,e=>[{storyItemData:y,authManager:i,portalHost:s.PORTAL_HOST,signal:e}],{function:"fetchThemeItemInfo",id:t,itemType:p});if((0,T.ZX)(f)||(0,g.bk)(f)&&("admin"===f.itemControl||"update"===f.itemControl)){let e=(0,l.N)(p,m),i=`/${e}/edit?id=${t}`,o=`${s.BASE_URL}/${e}/${t}/edit`;return c&&(0,A.j)({ctx:a,href:i,asPath:o}),{redirect:{asPath:o},success:!1}}if("public"!==f.access&&i)try{if(await b(D.T,e=>[{authManager:i,config:s,signal:e}],{function:"getUserAuthorization",id:t,itemType:p})==="user-unauthorized")throw Error("user-unauthorized")}catch(e){if(c)throw e;return{redirect:{asPath:`${s.BASE_URL}/error`},success:!1}}let j="";if(void 0!==a){let{req:t,res:i}=a;i&&"function"==typeof i.setHeader&&("public"===f.access?i.setHeader("Cache-Control",`public, max-age=${e.skipCache?0:s.CACHE_MAX_AGE}`):i.setHeader("Cache-Control",`private, max-age=${e.skipCache?0:s.NON_PUBLIC_CACHE_MAX_AGE}`)),j=t?.headers.host||""}return{id:t,itemDetails:(0,g.Em)(f),publishedData:y,host:j,initialThemeItemInfo:k,...x?{pageLocale:x}:{},success:!0}}catch(t){return _(t,{...e,isTemplate:m})}},_=(e,t)=>{let{id:i,authManager:s,config:o,ctx:r,signInUrl:n,itemType:d,isTemplate:c,shouldRedirect:h}=t;if(e&&e.code)try{return(0,j.q)({ctx:r,authManager:s,signInUrl:n,error:e,config:o}),{redirect:{asPath:""},error:e,success:!1}}catch(e){throw new a.Z(e)}else if("string"==typeof e.message&&e.message.search(`items/${i}/data`)>=0&&"invalid-json"===e.type){let t=d===f.o.Collection?"edit":"preview",s=(0,l.N)(d,c);return h&&(0,A.j)({ctx:r,href:`/${s}/${t}?id=${i}`,asPath:`${o.BASE_URL}/${s}/${i}/${t}`}),{redirect:{asPath:`${o.BASE_URL}/${s}/${i}/${t}`},error:e,success:!1}}else{if("string"==typeof e.message&&"user-unauthorized"===e.message)return h&&(0,A.j)({ctx:r,href:`/error?errType=unsupported-account&itemType=${d}`,asPath:`${o.BASE_URL}/error?errType=unsupported-account&itemType=${d}`}),{redirect:{asPath:`${o.BASE_URL}/error?errType=unsupported-account&itemType=${d}`},error:e,success:!1};if("string"!=typeof e.message||"item-not-supported-on-route"!==e.message||!i)return h&&(0,A.j)({ctx:r,href:`/error?itemType=${d}`,asPath:`${o.BASE_URL}/error?itemType=${d}`}),{redirect:{asPath:`${o.BASE_URL}/error?itemType=${d}`},error:e,success:!1};let a=t.convertRoute({routeDef:(0,p.kN)({route:"viewer",itemType:e.itemType,isTemplate:c,itemId:i}),featureDecisions:{canAccessExternalUrls:!1},config:o,authManager:s}),n="error?errType=item-not-supported-on-route`",l=`${o.BASE_URL}/${n}`;return h&&(0,A.j)({ctx:r,href:z(a.href,n),asPath:a.as||l}),{redirect:{asPath:a.as||l},success:!1}}},M=async e=>{let{id:t,authManager:i,config:s,ctx:o,signInUrl:h,itemType:m,shouldRedirect:u}=e;if(!t)throw Error(`no ${m} id`);if(t===d.BD)return L(e);let f={itemId:t,authManager:i,portalHost:s.PORTAL_HOST},y=!1;try{let e=await c.ZP.fetchItemDetails(f);y=(0,g.qg)(e);let p=(0,l.N)(m,y);if(P({itemDetails:e,expectedItemType:m,url:C(o)}),e.origin)return u&&(0,A.j)({ctx:o,href:`/${p}/${t}`,asPath:`${s.BASE_URL}/${p}/${t}`}),{success:!1,redirect:{asPath:`${s.BASE_URL}/${p}/${t}`}};if("update"===e.itemControl||"admin"===e.itemControl){if((0,T.ZX)(e)||(0,g.bk)(e))return u&&(0,A.j)({ctx:o,href:`/${p}/edit?id=${t}`,asPath:`${s.BASE_URL}/${p}/${t}/edit`}),{success:!1,redirect:{asPath:`${s.BASE_URL}/${p}/${t}/edit`}};if(void 0!==o){let{res:e}=o;e&&"function"==typeof e.setHeader&&e.setHeader("Cache-Control","max-age=0, private, must-revalidate")}let{itemData:a}=await c.ZP.fetchItemDraftData({itemDetails:e,type:m,authManager:i,portalHost:s.PORTAL_HOST,config:s}),l=await (0,n.ir)({storyItemData:a,authManager:i,portalHost:s.PORTAL_HOST}),d=(0,r.kz)(a);return{success:!0,id:t,itemDetails:e,draftData:a,initialThemeItemInfo:l,pageLocale:d}}throw new a.Z({type:"story-privileges-preview",itemType:m})}catch(r){if("string"==typeof r.message&&"item-not-supported-on-route"===r.message&&t){let a=e.convertRoute({routeDef:(0,p.kN)({route:"preview",itemType:r.itemType,itemId:t,isTemplate:y}),featureDecisions:{canAccessExternalUrls:!1},config:s,authManager:i}),n="error?errType=item-not-supported-on-route`",l=`${s.BASE_URL}/${n}`;return u&&(0,A.j)({ctx:o,href:z(a.href,n),asPath:a.as||l}),{redirect:{asPath:a.as||l},success:!1}}if(r instanceof a.Z)throw new a.Z(r);return(0,j.q)({ctx:o,authManager:i,signInUrl:h,error:r,config:s}),{redirect:{asPath:""},error:r,success:!1}}},L=e=>{let{config:t,formatMessage:i}=e;return{success:!0,...(0,d.kS)({formatMessage:i,baseUrl:t.BASE_URL,siteUrl:(0,k.o)({siteUrl:t.SITE_URL,isComponentMounted:!0,isScriptEmbedded:t.IS_SCRIPT_EMBEDDED}),productName:t.PRODUCT_NAME,baseThemeId:(0,h.TI)(t.INCLUDED_STORY_THEMES)}),initialThemeItemInfo:{}}},E=(e,t)=>{let i={...(0,m.rV)({itemType:f.o.Frame,config:e,isTemplate:!1}),created:13462453245,modified:13462453245,owner:"ton12618@esri.com",numViews:1e4,id:t||"",size:2},s=(0,m.Fn)(e.BASE_URL);return{id:t||"",itemDetails:(0,g.Em)(i),publishedData:s,host:"",initialThemeItemInfo:{},success:!0}},z=(e,t)=>"object"==typeof e&&e.pathname?e.pathname:"string"==typeof e?e:t}}]);